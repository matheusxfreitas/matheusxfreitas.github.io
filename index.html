<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Controle de Estudos - Psicólogo Uberlândia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FDFBF8; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); }
        .calendar-day { transition: all 0.2s ease; position: relative; }
        .calendar-day:hover { background-color: #f7f3ef; }
        .calendar-day.has-task::after { content: ''; display: block; width: 6px; height: 6px; border-radius: 50%; background-color: #D5A021; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); }
        .calendar-day.overdue-task::before { content: ''; display: block; width: 6px; height: 6px; border-radius: 50%; background-color: #ef4444; position: absolute; top: 6px; left: 50%; transform: translateX(-50%); }
        .calendar-day.selected { background-color: #D5A021; color: white; font-weight: bold; }
        .task-card { background-color: #FFFFFF; border-left: 4px solid #D6BFAA; transition: box-shadow 0.3s ease; position: relative; }
        .task-card.review-r1 { border-left-color: #6A9C89; }
        .task-card.review-r3 { border-left-color: #D5A021; }
        .task-card.review-r5 { border-left-color: #A25B5B; }
        .task-card.overdue { border-left-color: #ef4444; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        .task-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .task-card.legis { border-left-color: #38bdf8; }
        .task-checkbox:checked + label { text-decoration: line-through; color: #9A9A9A; }
        .chart-container { position: relative; width: 100%; max-width: 250px; margin-left: auto; margin-right: auto; height: 250px; }
        .modal.hidden { display: none; }
        body.modal-open { overflow: hidden; }
        .control-button { background-color: #fff; border: 1px solid #ddd; transition: all 0.2s ease; }
        .control-button:hover { background-color: #f9f9f9; border-color: #ccc; }
        .blurred { filter: blur(8px); transition: filter 0.3s ease-in-out; }
        .hidden { display: none; }
        .task-card .actions-menu { position: absolute; top: 0.5rem; right: 0.5rem; display: none; gap: 0.5rem; }
        .task-card:hover .actions-menu { display: flex; }
        .action-btn { background-color: #f0f0f0; border-radius: 9999px; padding: 0.35rem; transition: background-color 0.2s ease; cursor: pointer; }
        .action-btn:hover { background-color: #e0e0e0; }
        .action-btn svg { width: 1rem; height: 1rem; color: #555; }
        .tab-button { padding: 8px 16px; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab-button.active { border-bottom-color: #D5A021; font-weight: 600; color: #D5A021; }
    </style>
</head>
<body class="text-gray-800">

<!-- Mural de Senha -->
<div id="password-wall" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 backdrop-blur-sm">
    <div class="w-full max-w-xs bg-white p-6 rounded-lg shadow-xl">
        <h2 class="text-xl font-bold text-center text-gray-800 mb-4">Acessar Painel</h2>
        <form id="password-form" class="space-y-4">
            <input type="password" id="password-input" placeholder="Palavra-passe" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            <button type="submit" class="w-full bg-[#D5A021] hover:bg-amber-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                Liberar Acesso
            </button>
            <p id="password-error" class="text-red-500 text-xs text-center italic h-4"></p>
        </form>
    </div>
</div>

<div id="app-container" class="container mx-auto p-4 md:p-8 max-w-7xl">
    <header class="mb-8">
        <div class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Meu Painel de Estudos 4.7</h1>
            <p class="text-lg text-gray-600 mt-2">Missão: Aprovação Psicólogo(a) - Prefeitura de Uberlândia</p>
        </div>
        <div class="mt-6 flex flex-wrap justify-center items-center gap-2">
            <!-- Botões de Ação Principais -->
            <button id="home-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                Início
            </button>
            <button id="view-overdue-tasks-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm text-red-600 border-red-300">Visualizar Aulas Atrasadas</button>
            <button id="add-task-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm text-green-600 border-green-300">Incluir Aula(s)</button>
            <button id="manage-tasks-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm text-blue-600 border-blue-300">Gerenciar Aulas</button>
            
            <!-- Menu de Ajustes -->
            <div class="relative settings-dropdown">
                <button id="settings-button" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    Ajustes
                </button>
                <!-- CORREÇÃO: Removido o div extra e o ID foi movido para o container principal do menu -->
                <div id="settings-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border">
                    <a href="#" id="export-backup-btn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Exportar Backup</a>
                    <a href="#" id="import-backup-btn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Importar Backup</a>
                    <a href="#" id="reset-btn" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Resetar Progresso</a>
                    <input type="file" id="import-backup-file" class="hidden" accept=".json">
                </div>
            </div>
        </div>
    </header>

    <!-- Cards de Informação -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-center items-center">
            <h3 class="font-semibold text-gray-500 mb-2">Contagem Regressiva</h3>
            <div id="countdown" class="text-2xl font-bold text-[#4A4A4A]"></div>
        </div>
        <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-center items-center">
            <h3 class="font-semibold text-gray-500 mb-2">Data da Prova</h3>
            <p class="text-2xl font-bold text-[#4A4A4A]">26/10/2025</p>
        </div>
        <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-center items-center">
            <h3 class="font-semibold text-gray-500 mb-2">Progresso Geral</h3>
            <p id="progressText" class="text-2xl font-bold text-[#4A4A4A]">0%</p>
        </div>
         <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-center items-center">
            <h3 class="font-semibold text-gray-500 mb-2">Hoje é</h3>
            <p id="currentDate" class="text-xl font-bold text-[#4A4A4A] text-center"></p>
        </div>
    </div>

    <!-- Conteúdo Principal -->
    <main class="bg-white p-4 sm:p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Coluna Esquerda: Calendário e Tarefas -->
            <div class="w-full lg:w-2/3">
                <div id="calendar-container"></div>
                <div id="plan-content" class="space-y-4 mt-6"></div>
            </div>
            <!-- Coluna Direita: Gráficos e Legendas -->
            <aside class="w-full lg:w-1/3 lg:border-l lg:pl-8 border-gray-200">
                <div class="sticky top-8">
                    <h2 class="text-2xl font-bold mb-4 text-center">Progresso Geral</h2>
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                    <div class="mt-8 p-4 rounded-lg bg-gray-50 border">
                        <h3 class="font-bold text-lg mb-2">Legenda de Revisões</h3>
                         <div class="flex items-center space-x-2 text-sm"><div class="w-4 h-4 rounded-full bg-[#6A9C89]"></div><span>R1 (D+1) - Rápida</span></div>
                         <div class="flex items-center space-x-2 text-sm"><div class="w-4 h-4 rounded-full bg-[#D5A021]"></div><span>R3 (D+7) - Intermediária</span></div>
                         <div class="flex items-center space-x-2 text-sm"><div class="w-4 h-4 rounded-full bg-[#A25B5B]"></div><span>R5 (D+30) - Longo Prazo</span></div>
                         <div class="flex items-center space-x-2 text-sm"><div class="w-4 h-4 rounded-full bg-red-500"></div><span>Tarefa Atrasada</span></div>
                    </div>
                    <div id="subject-progress-container" class="mt-8">
                        <h3 class="text-xl font-bold mb-4 text-center">Progresso por Matéria</h3>
                        <div id="subject-progress-bars" class="space-y-4"></div>
                    </div>
                    <!-- Novo Card: Seções Livres -->
                    <div id="free-sections-container" class="mt-8"></div>
                </div>
            </aside>
        </div>
    </main>
</div>

<!-- Modal Adicionar/Editar Aula (z-index 60) -->
<div id="addTaskModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]">
    <div class="bg-white rounded-lg shadow-2xl w-full max-w-lg">
        <div class="flex justify-between items-center p-4 border-b">
            <h3 id="modal-title" class="text-xl font-bold">Incluir Nova Aula</h3>
            <button class="close-modal text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
        </div>
        <form id="add-task-form" class="p-6 space-y-4">
            <input type="hidden" id="task-id">
            <input type="hidden" id="original-task-date">
            <div>
                <label for="task-date" class="block text-sm font-medium text-gray-700">Data (DD/MM/AAAA)</label>
                <input type="date" id="task-date" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3">
            </div>
            <div>
                <label for="task-subject" class="block text-sm font-medium text-gray-700">Matéria</label>
                <select id="task-subject" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3">
                    <!-- Options will be populated by JS -->
                </select>
            </div>
            <div>
                <label for="task-lesson" class="block text-sm font-medium text-gray-700">Nº da Aula</label>
                <input type="text" id="task-lesson" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3">
            </div>
            <div>
                <label for="task-topic" class="block text-sm font-medium text-gray-700">Tópico</label>
                <input type="text" id="task-topic" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3">
            </div>
            <div>
                <label for="task-type" class="block text-sm font-medium text-gray-700">Tipo</label>
                <select id="task-type" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3">
                    <option value="video">Videoaula</option>
                    <option value="pdf">PDF</option>
                    <option value="legis">Legislação</option>
                </select>
            </div>
            <div class="flex justify-end pt-4">
                <button type="submit" class="bg-[#D5A021] hover:bg-amber-600 text-white font-bold py-2 px-4 rounded">Salvar Aula</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal Visualizar Todas as Aulas (z-index 50) -->
<!-- CORREÇÃO: Reestruturação do Modal para corrigir o bug de scroll -->
<div id="allTasksModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col">
        <!-- Header (não muda) -->
        <div class="flex justify-between items-center p-4 border-b flex-shrink-0">
            <h3 class="text-xl font-bold">Gerenciar Aulas</h3>
            <button class="close-modal text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
        </div>
        
        <!-- Abas (não muda) -->
        <div class="flex border-b flex-shrink-0">
            <button id="tab-active" class="tab-button active">Aulas Ativas</button>
            <button id="tab-trash" class="tab-button">Lixeira</button>
        </div>
        
        <!-- Container principal do conteúdo que vai crescer para preencher o espaço -->
        <div class="flex-grow overflow-hidden relative">
            <!-- Painel de Aulas Ativas -->
            <div id="tab-content-active" class="tab-pane absolute inset-0 flex flex-col">
                <!-- Seção de filtros e ações (altura fixa) -->
                <div class="p-4 border-b flex-shrink-0">
                    <div id="all-tasks-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-center"></div>
                    <div class="flex flex-wrap gap-2 items-center">
                        <input type="text" id="all-tasks-search" class="flex-grow p-2 border rounded-md" placeholder="Buscar por matéria ou tópico...">
                        <button id="shift-all-forward-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Adiar Não-Concluídas (+1 dia)</button>
                        <button id="shift-all-backward-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Adiantar Não-Concluídas (-1 dia)</button>
                    </div>
                    <div id="selected-actions-container" class="hidden mt-4 flex flex-wrap gap-2 items-center p-2 bg-amber-50 border border-amber-200 rounded-md">
                        <span id="selection-count" class="text-sm font-semibold text-gray-700"></span>
                        <button id="shift-selected-forward-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Adiar</button>
                        <button id="shift-selected-backward-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Adiantar</button>
                        <button id="delete-selected-btn" class="bg-red-500 hover:bg-red-600 text-white text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Excluir</button>
                    </div>
                    <div class="mt-4 p-2 bg-gray-50 rounded-md border">
                        <div class="flex flex-wrap gap-4 items-center">
                            <div class="flex items-center gap-2">
                                <label for="filter-subject" class="text-sm font-medium">Matéria:</label>
                                <select id="filter-subject" class="p-1 border rounded-md text-sm"><option value="">Todas</option></select>
                            </div>
                            <div class="flex items-center gap-2">
                                <label for="sort-by" class="text-sm font-medium">Ordenar por:</label>
                                <select id="sort-by" class="p-1 border rounded-md text-sm">
                                    <option value="date-asc">Data (Crescente)</option>
                                    <option value="date-desc">Data (Decrescente)</option>
                                    <option value="subject-asc">Matéria (A-Z)</option>
                                    <option value="subject-desc">Matéria (Z-A)</option>
                                </select>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="filter-not-completed" class="h-4 w-4 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]">
                                <label for="filter-not-completed" class="text-sm font-medium">Não Concluídas</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="filter-overdue" class="h-4 w-4 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]">
                                <label for="filter-overdue" class="text-sm font-medium">Atrasadas</label>
                            </div>
                        </div>
                        <div id="results-count-container" class="mt-2 text-sm font-semibold text-gray-600"></div>
                    </div>
                </div>
                <!-- Seção da tabela com scroll -->
                <div class="overflow-y-auto flex-grow p-4">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50 sticky top-0">
                            <tr>
                                <th class="px-6 py-3 text-left"><input type="checkbox" id="select-all-tasks-checkbox" class="h-4 w-4 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]"></th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Matéria</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aula</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tópico</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="all-tasks-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>

            <!-- Painel da Lixeira -->
            <div id="tab-content-trash" class="tab-pane hidden absolute inset-0 flex flex-col">
                <!-- Seção de ações da lixeira (altura fixa) -->
                <div class="p-4 border-b flex-shrink-0">
                    <p class="text-sm text-gray-600">Aulas excluídas são mantidas aqui. Você pode restaurá-las ou excluí-las permanentemente.</p>
                    <div id="trash-actions-container" class="hidden mt-2 flex flex-wrap gap-2 items-center">
                         <button id="restore-all-btn" class="control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm text-green-600 border-green-300">Restaurar Selecionadas</button>
                         <button id="delete-all-perm-btn" class="bg-red-700 hover:bg-red-800 text-white text-sm font-semibold py-2 px-4 rounded-lg shadow-sm">Excluir Selecionadas</button>
                    </div>
                </div>
                <!-- Seção da tabela da lixeira com scroll -->
                <div class="overflow-y-auto flex-grow p-4">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50 sticky top-0">
                            <tr>
                                <th class="px-6 py-3 text-left"><input type="checkbox" id="select-all-trash-checkbox" class="h-4 w-4 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]"></th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Matéria</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tópico</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="trash-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal de Confirmação (z-index 70) -->
<div id="confirmationModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]">
    <div class="bg-white rounded-lg shadow-2xl w-full max-w-sm p-6">
        <h3 class="text-lg font-semibold mb-4" id="confirmation-message">Tem certeza?</h3>
        <div class="flex justify-end space-x-4">
            <button id="confirm-cancel-btn" class="control-button py-2 px-4 rounded-lg">Cancelar</button>
            <button id="confirm-ok-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg">Confirmar</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
    // =================== CONFIGURAÇÃO E VARIÁVEIS GLOBAIS ===================
    const firebaseConfig = {
        apiKey: "AIzaSyAVd3uPqsJdyi1a3VYZbncrLZeq7zF-vNE",
        authDomain: "meu-painel-de-estudos-5d0ee.firebaseapp.com",
        projectId: "meu-painel-de-estudos-5d0ee",
        storageBucket: "meu-painel-de-estudos-5d0ee.appspot.com",
        messagingSenderId: "700808378235",
        appId: "1:700808378235:web:64bc3701361324c2c36fde"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let viewDate = new Date();
    viewDate.setHours(0, 0, 0, 0);
    let studyPlan = {};
    let progressChart;
    let isAuthenticated = false; // Flag to track authentication

    const planContent = document.getElementById('plan-content');
    const allTasksModal = document.getElementById('allTasksModal');
    const addTaskModal = document.getElementById('addTaskModal');
    const confirmationModal = document.getElementById('confirmationModal');

    // =================== LÓGICA DO PASSWORD WALL ===================
    const passwordWall = document.getElementById('password-wall');
    const appContainer = document.getElementById('app-container');
    const passwordForm = document.getElementById('password-form');
    const passwordInput = document.getElementById('password-input');
    const passwordError = document.getElementById('password-error');
    
    // Check if user is already authenticated from a previous session
    if (sessionStorage.getItem('isAuthenticated') === 'true') {
        isAuthenticated = true;
        passwordWall.classList.add('hidden');
    } else {
        appContainer.classList.add('blurred');
    }

    passwordForm.addEventListener('submit', (e) => {
        e.preventDefault();
        if (passwordInput.value === 'passei2025') {
            isAuthenticated = true;
            sessionStorage.setItem('isAuthenticated', 'true'); // Save auth state
            passwordWall.classList.add('hidden');
            appContainer.classList.remove('blurred');
        } else {
            passwordError.textContent = 'Senha incorreta.';
            passwordInput.value = '';
            setTimeout(() => { passwordError.textContent = ''; }, 2000);
        }
    });

    // =================== FUNÇÕES AUXILIARES DE DATA ===================
    function formatDateYMD(date) {
        const d = new Date(date);
        const year = d.getFullYear();
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const day = String(d.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    function formatDateDMY(dateString) {
        const date = new Date(dateString + 'T03:00:00Z');
        return date.toLocaleDateString('pt-BR', { timeZone: 'America/Sao_Paulo' });
    }

    function addDays(date, days) {
        const result = new Date(date);
        result.setDate(result.getDate() + days);
        return result;
    }

    function isSameDay(date1, date2) {
        return date1.getFullYear() === date2.getFullYear() &&
               date1.getMonth() === date2.getMonth() &&
               date1.getDate() === date2.getDate();
    }

    // =================== FUNÇÕES AUXILIARES GERAIS ===================
    function generateUniqueId(task) {
         return `${task.subject.replace(/[^a-zA-Z0-9]/g, '')}-${task.lesson.replace(/[^a-zA-Z0-9]/g, '')}-${task.type}-${new Date().getTime()}`;
    }

    function showConfirmation(message, onConfirm) {
        const messageEl = document.getElementById('confirmation-message');
        const okBtn = document.getElementById('confirm-ok-btn');
        const cancelBtn = document.getElementById('confirm-cancel-btn');

        messageEl.textContent = message;

        const okListener = () => {
            onConfirm();
            closeModal(confirmationModal);
            cleanup();
        };

        const cancelListener = () => {
            closeModal(confirmationModal);
            cleanup();
        };

        const cleanup = () => {
            okBtn.removeEventListener('click', okListener);
            cancelBtn.removeEventListener('click', cancelListener);
        };

        okBtn.addEventListener('click', okListener);
        cancelBtn.addEventListener('click', cancelListener);

        openModal(confirmationModal);
    }

    // =================== CONTROLE DE MODAIS E SCROLL ===================
    function openModal(modalElement) {
        modalElement.classList.remove('hidden');
        document.body.classList.add('modal-open');
    }

    function closeModal(modalElement) {
        modalElement.classList.add('hidden');
        if (document.querySelectorAll('.modal:not(.hidden)').length === 0) {
            document.body.classList.remove('modal-open');
        }
    }

    // =================== LÓGICA PRINCIPAL DA APLICAÇÃO ===================
   
    function initializeStudyPlan() {
        let plan = { tasks: {}, reviews: {}, dailyGoals: {} };
        
        let allTasks = [
            // --- JUNHO 2025 ---
            { date: '2025-06-24', subject: 'Língua Portuguesa', lesson: '1', topic: 'Panorama das Classes Gramaticais', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Língua Portuguesa', lesson: '2', topic: 'Panorama das Classes Gramaticais II', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Língua Portuguesa', lesson: '3', topic: 'Substantivos e seus Satélites', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Língua Portuguesa', lesson: '4', topic: 'Substantivos e seus Satélites II', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Raciocínio Lógico-Matemático', lesson: '1', topic: 'Frações', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Raciocínio Lógico-Matemático', lesson: '2', topic: 'Frações II', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Raciocínio Lógico-Matemático', lesson: '3', topic: 'Frações III', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Raciocínio Lógico-Matemático', lesson: '4', topic: 'Dicas para Simplificar ("Cortar" ou Aproximar) Seus Cálculos', type: 'video', completed: true },
            { date: '2025-06-24', subject: 'Administração Pública', lesson: '1', topic: 'Princípios Fundamentais', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Administração Pública', lesson: '1', topic: 'Princípios Fundamentais', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Administração Pública', lesson: '2', topic: 'Princípios Fundamentais II', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Administração Pública', lesson: '3', topic: 'Teoria Geral dos Direitos Fundamentais', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Administração Pública', lesson: '4', topic: 'Artigo 5º', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'História das Políticas Públicas - Linha do Tempo', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'História das Políticas Públicas - Linha do Tempo II', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'História das Políticas Públicas - Linha do Tempo III', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'História das Políticas Públicas - Linha do Tempo IV', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Língua Portuguesa', lesson: '5', topic: 'Adjetivos - Identificação, Valor Discursivo', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Língua Portuguesa', lesson: '6', topic: 'Adjetivos - Flexão', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Língua Portuguesa', lesson: '7', topic: 'Adjetivos - Locução Adjetiva e Exercícios', type: 'video', completed: true },
            { date: '2025-06-25', subject: 'Língua Portuguesa', lesson: '8', topic: 'Artigo: Identificação, Emprego e Sentido', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Língua Portuguesa', lesson: '8', topic: 'Artigo: Identificação, Emprego e Sentido', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Raciocínio Lógico-Matemático', lesson: '5', topic: 'Conjuntos', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Raciocínio Lógico-Matemático', lesson: '6', topic: 'Conjuntos II', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Raciocínio Lógico-Matemático', lesson: '7', topic: 'Conjuntos III', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Raciocínio Lógico-Matemático', lesson: '8', topic: 'Conjuntos IV', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Administração Pública', lesson: '5', topic: 'Artigo 5º II', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Administração Pública', lesson: '6', topic: 'Artigo 5º III', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Administração Pública', lesson: '7', topic: 'Artigo 5º IV', type: 'video', completed: true },
            { date: '2025-06-26', subject: 'Administração Pública', lesson: '8', topic: 'Artigo 5º V', type: 'video', completed: true },
            { date: '2025-06-27', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'História das Políticas Públicas - Linha do Tempo V', type: 'video', completed: true },
            { date: '2025-06-27', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'História das Políticas Públicas - Linha do Tempo VI', type: 'video', completed: true },
            { date: '2025-06-27', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'História das Políticas Públicas - Linha do Tempo VII', type: 'video', completed: true },
            { date: '2025-06-27', subject: 'Língua Portuguesa', lesson: '9', topic: 'Artigo: Identificação, Emprego e Sentido II', type: 'video', completed: true },
            { date: '2025-06-27', subject: 'Língua Portuguesa', lesson: '10', topic: 'Preposições: Identificação, Locução Prepositiva, Valor Semântico', type: 'video', completed: true },
            // --- JULHO 2025 ---
            { date: '2025-07-15', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'História das Políticas Públicas - Linha do Tempo VIII', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'História das Políticas Públicas - Linha do Tempo IX', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'História das Políticas Públicas - Linha do Tempo X', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Contextualização', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Língua Portuguesa', lesson: '11', topic: 'Pronomes: Identificação, Emprego de Pronomes Pessoais', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Língua Portuguesa', lesson: '12', topic: 'Pronomes Possessivos', type: 'video', completed: true },
            { date: '2025-07-15', subject: 'Língua Portuguesa', lesson: '13', topic: 'Pronomes Indefinidos - Pronomes Interrogativos e Pronomes Relativos', type: 'video', completed: true },
            { date: '2025-07-16', subject: 'Língua Portuguesa', lesson: '13', topic: 'Pronomes Indefinidos - Pronomes Interrogativos e Pronomes Relativos', type: 'video', completed: true },
            { date: '2025-07-16', subject: 'Língua Portuguesa', lesson: '14', topic: 'Pronomes Relativos', type: 'video', completed: true },
            { date: '2025-07-16', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Resolução n. 10/2005 - Código de Ética do Psicólogo', type: 'pdf', completed: true },
            { date: '2025-07-16', subject: 'Língua Portuguesa', lesson: '1', topic: 'Compreensão e Interpretação de Textos', type: 'pdf', completed: true },
            { date: '2025-07-17', subject: 'Língua Portuguesa', lesson: '1', topic: 'Compreensão e Interpretação de Textos', type: 'pdf', completed: true },
            { date: '2025-07-18', subject: 'Língua Portuguesa', lesson: '1', topic: 'Compreensão e Interpretação de Textos', type: 'pdf', completed: true },
            { date: '2025-07-18', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Emendas Recentes', type: 'video', completed: true },
            { date: '2025-07-18', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Art. 194', type: 'video', completed: true },
            { date: '2025-07-18', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Art. 195', type: 'video', completed: true },
            { date: '2025-07-18', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Art. 196', type: 'video', completed: true },
            { date: '2025-07-18', subject: 'Língua Portuguesa', lesson: '15', topic: 'Pronomes Demonstrativos', type: 'video', completed: true },
            { date: '2025-07-19', subject: 'Língua Portuguesa', lesson: '16', topic: 'Emprego e Colocação Pronominal', type: 'video', completed: true },
            { date: '2025-07-19', subject: 'Língua Portuguesa', lesson: '17', topic: 'Emprego e Colocação Pronominal II', type: 'video', completed: true },
            { date: '2025-07-19', subject: 'Língua Portuguesa', lesson: '18', topic: 'Colocação Pronominal', type: 'video', completed: true },
            { date: '2025-07-19', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Teorias e Técnicas Psicoterápicas Parte I', type: 'pdf', completed: true },
            { date: '2025-07-20', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Teorias e Técnicas Psicoterápicas - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-20', subject: 'Língua Portuguesa', lesson: '2', topic: 'Tipologias e Gêneros Textuais', type: 'pdf', completed: true },
            { date: '2025-07-21', subject: 'Língua Portuguesa', lesson: '2', topic: 'Tipologias e Gêneros Textuais', type: 'pdf', completed: true },
            { date: '2025-07-22', subject: 'Língua Portuguesa', lesson: '2', topic: 'Tipologias e Gêneros Textuais', type: 'pdf', completed: true },
            { date: '2025-07-22', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Art. 197', type: 'video', completed: true },
            { date: '2025-07-22', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Art. 198', type: 'video', completed: true },
            { date: '2025-07-22', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Art. 198 - Questões', type: 'video', completed: true },
            { date: '2025-07-22', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Art. 199', type: 'video', completed: true },
            { date: '2025-07-22', subject: 'Língua Portuguesa', lesson: '19', topic: 'Verbos: Definição e Estrutura - Tempos e Modos Verbais - Verbos Regulares', type: 'video', completed: true },
            { date: '2025-07-22', subject: 'Língua Portuguesa', lesson: '20', topic: 'Tempos e Modos Verbais - Verbos Irregulares', type: 'video', completed: true },
            { date: '2025-07-23', subject: 'Língua Portuguesa', lesson: '20', topic: 'Tempos e Modos Verbais - Verbos Irregulares', type: 'video', completed: true },
            { date: '2025-07-23', subject: 'Língua Portuguesa', lesson: '21', topic: 'Tempos e Modos Verbais - Significados', type: 'video', completed: true },
            { date: '2025-07-23', subject: 'Língua Portuguesa', lesson: '22', topic: 'Tempos e Modos Verbais - Significados II', type: 'video', completed: true },
            { date: '2025-07-23', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Teorias e Técnicas Psicoterápicas - Parte II', type: 'pdf', completed: true },
            { date: '2025-07-24', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Teorias e Técnicas Psicoterápicas Parte II', type: 'pdf', completed: true },
            { date: '2025-07-24', subject: 'Língua Portuguesa', lesson: '3', topic: 'Coesão e Coerência, Semântica, Figuras e Vícios de Linguagem, Reescrita', type: 'pdf', completed: true },
            { date: '2025-07-25', subject: 'Língua Portuguesa', lesson: '3', topic: 'Coesão e Coerência, Semântica, Figuras e Vícios de Linguagem, Reescrita', type: 'pdf', completed: true },
            { date: '2025-07-25', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Art. 200', type: 'video', completed: true },
            { date: '2025-07-25', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Questões Constituição', type: 'video', completed: true },
            { date: '2025-07-25', subject: 'Conhecimentos Específicos', lesson: '22', topic: 'Lei 8.080/90 - Art. 1 a 3', type: 'video', completed: true },
            { date: '2025-07-25', subject: 'Conhecimentos Específicos', lesson: '23', topic: 'Lei 8.080/90 - Art. 4 e Questões', type: 'video', completed: true },
            { date: '2025-07-25', subject: 'Língua Portuguesa', lesson: '23', topic: 'Modo Imperativo', type: 'video', completed: true },
            { date: '2025-07-25', subject: 'Língua Portuguesa', lesson: '24', topic: 'Formas Nominais dos Verbos', type: 'video', completed: true },
            { date: '2025-07-26', subject: 'Língua Portuguesa', lesson: '24', topic: 'Formas Nominais dos Verbos', type: 'video', completed: true },
            { date: '2025-07-26', subject: 'Língua Portuguesa', lesson: '25', topic: 'Classificando Verbos', type: 'video', completed: true },
            { date: '2025-07-26', subject: 'Língua Portuguesa', lesson: '26', topic: 'Correlação Verbal', type: 'video', completed: true },
            { date: '2025-07-26', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Psicopatologia - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-27', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Psicopatologia - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-27', subject: 'Língua Portuguesa', lesson: '1', topic: 'Estrutura e Processos de Formação de Palavras', type: 'pdf', completed: true },
            { date: '2025-07-27', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Lei 8.080/90 - Art. 5º e 6º', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Lei 8.080/90 - Art. 5º e 6º', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Conhecimentos Específicos', lesson: '25', topic: 'Lei 8.080/90 - Assistência Toxicológica', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Conhecimentos Específicos', lesson: '26', topic: 'Lei 8.080/90 - Questões', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Conhecimentos Específicos', lesson: '27', topic: 'Lei 8.080/90 - Art. 7º e Questões', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Língua Portuguesa', lesson: '27', topic: 'Vozes Verbais', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Língua Portuguesa', lesson: '28', topic: 'Vozes Verbais II', type: 'video', completed: true },
            { date: '2025-07-28', subject: 'Língua Portuguesa', lesson: '29', topic: 'Advérbio', type: 'video', completed: true },
            { date: '2025-07-29', subject: 'Língua Portuguesa', lesson: '29', topic: 'Advérbio', type: 'video', completed: true },
            { date: '2025-07-29', subject: 'Língua Portuguesa', lesson: '30', topic: 'Preposições - Numerais e interjeições', type: 'video', completed: true },
            { date: '2025-07-29', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Psicopatologia - Parte II', type: 'pdf', completed: true },
            { date: '2025-07-29', subject: 'Língua Portuguesa', lesson: '2', topic: 'Emprego e Sentido das Classes Gramaticais - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-30', subject: 'Língua Portuguesa', lesson: '2', topic: 'Emprego e Sentido das Classes Gramaticais - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-31', subject: 'Língua Portuguesa', lesson: '2', topic: 'Emprego e Sentido das Classes Gramaticais - Parte I', type: 'pdf', completed: true },
            { date: '2025-07-31', subject: 'Conhecimentos Específicos', lesson: '28', topic: 'Lei 8.080/90 - Art. 8° a 14', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Conhecimentos Específicos', lesson: '29', topic: 'Lei 8.080/90 - Questões', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Conhecimentos Específicos', lesson: '30', topic: 'Lei 8.080/90 - Art. 15', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Conhecimentos Específicos', lesson: '31', topic: 'Lei 8.080/90 - Art. 16 e Questões', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Língua Portuguesa', lesson: '1', topic: 'Sintaxe da Oração: Frase, Período e Oração', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Língua Portuguesa', lesson: '2', topic: 'Sintaxe da Oração: Sujeito', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Língua Portuguesa', lesson: '3', topic: 'Sintaxe da Oração: Sujeito II', type: 'video', completed: true },
            { date: '2025-07-31', subject: 'Língua Portuguesa', lesson: '4', topic: 'Sintaxe da Oração: Sujeito III', type: 'video', completed: true },
            // --- AGOSTO 2025 ---
            { date: '2025-08-01', subject: 'Língua Portuguesa', lesson: '4', topic: 'Sintaxe da Oração: Sujeito III', type: 'video', completed: true },
            { date: '2025-08-01', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicologia Educacional', type: 'pdf', completed: true },
            { date: '2025-08-01', subject: 'Língua Portuguesa', lesson: '3', topic: 'Emprego e Sentido das Classes Gramaticais - Parte II', type: 'pdf', completed: true },
            { date: '2025-08-02', subject: 'Língua Portuguesa', lesson: '3', topic: 'Emprego e Sentido das Classes Gramaticais - Parte II', type: 'pdf', completed: true },
            { date: '2025-08-03', subject: 'Língua Portuguesa', lesson: '3', topic: 'Emprego e Sentido das Classes Gramaticais - Parte II', type: 'pdf', completed: true },
            { date: '2025-08-03', subject: 'Conhecimentos Específicos', lesson: '32', topic: 'Lei 8.080/90 - Art. 17 e Questões', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Conhecimentos Específicos', lesson: '33', topic: 'Lei 8.080/90 - Art. 18 e Questões', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Conhecimentos Específicos', lesson: '34', topic: 'Lei 8.080/90 - Art. 19 ao 19 L', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Conhecimentos Específicos', lesson: '35', topic: 'Lei 8.080/90 - Art. 19 M ao 19 U', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Língua Portuguesa', lesson: '5', topic: 'Sintaxe da Oração: Predicativo Versus Aposto', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Língua Portuguesa', lesson: '6', topic: 'Sintaxe da Oração: Predicativo Versus Aposto II', type: 'video', completed: true },
            { date: '2025-08-03', subject: 'Língua Portuguesa', lesson: '7', topic: 'Sintaxe da Oração: Adjunto Adnominal Versus Predicativo', type: 'video', completed: true },
            { date: '2025-08-04', subject: 'Língua Portuguesa', lesson: '7', topic: 'Sintaxe da Oração: Adjunto Adnominal Versus Predicativo', type: 'video', completed: true },
            { date: '2025-08-04', subject: 'Língua Portuguesa', lesson: '8', topic: 'Sintaxe da Oração: Predicativo Versus Adjunto Adverbial', type: 'video', completed: true },
            { date: '2025-08-04', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Lei Federal n. 10.741/2003 - Estatuto da Pessoa Idosa', type: 'pdf', completed: true },
            { date: '2025-08-04', subject: 'Língua Portuguesa', lesson: '4', topic: 'A Sintaxe do Período Simples - Parte I', type: 'pdf', completed: true },
            { date: '2025-08-05', subject: 'Língua Portuguesa', lesson: '4', topic: 'A Sintaxe do Período Simples - Parte I', type: 'pdf', completed: true },
            { date: '2025-08-05', subject: 'Conhecimentos Específicos', lesson: '36', topic: 'Lei 8.080/90 - Questões', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Conhecimentos Específicos', lesson: '36', topic: 'Lei 8.080/90 - Questões', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Conhecimentos Específicos', lesson: '37', topic: 'Lei 8.080/90 - Art. 20 ao 35', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Conhecimentos Específicos', lesson: '38', topic: 'Lei 8.080/90 - Art. 36 ao 55', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Conhecimentos Específicos', lesson: '39', topic: 'Lei 8.080/90 - Questões', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Língua Portuguesa', lesson: '9', topic: 'Sintaxe da Oração: Adjunto Adnominal Versus Adjunto Adverbial', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Língua Portuguesa', lesson: '10', topic: 'Sintaxe da Oração: Adjunto Adverbial Versus Objeto', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Língua Portuguesa', lesson: '11', topic: 'Sintaxe da Oração: Adjunto Adverbial Versus Objeto', type: 'video', completed: true },
            { date: '2025-08-06', subject: 'Língua Portuguesa', lesson: '12', topic: 'Sintaxe da Oração: Complemento Nominal Versus Adjunto Adnominal', type: 'video', completed: true },
            { date: '2025-08-07', subject: 'Língua Portuguesa', lesson: '12', topic: 'Sintaxe da Oração: Complemento Nominal Versus Adjunto Adnominal', type: 'video', completed: true },
            { date: '2025-08-07', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Lei n. 13.146/2015 e Alterações - Estatuto da Pessoa com Deficiência', type: 'pdf' },
            { date: '2025-08-07', subject: 'Língua Portuguesa', lesson: '5', topic: 'A Sintaxe do Período Simples - Parte II', type: 'pdf', completed: true },
            { date: '2025-08-08', subject: 'Língua Portuguesa', lesson: '5', topic: 'A Sintaxe do Período Simples - Parte II', type: 'pdf', completed: true },
            { date: '2025-08-08', subject: 'Conhecimentos Específicos', lesson: '40', topic: 'Alocação de Recursos - Como Consta na Legislação - CF e Lei 8.080/90', type: 'video', completed: true },
            { date: '2025-08-08', subject: 'Conhecimentos Específicos', lesson: '41', topic: 'Lei Orgânica da Saúde - Lei 8.142/90', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Conhecimentos Específicos', lesson: '41', topic: 'Lei Orgânica da Saúde - Lei 8.142/90', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Conhecimentos Específicos', lesson: '42', topic: 'Lei Orgânica da Saúde - Lei 8.142/90-Questões', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Conhecimentos Específicos', lesson: '43', topic: 'Decreto 7.508/11 - Arts. 1 e 2', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Língua Portuguesa', lesson: '13', topic: 'Verbos de Ligação e Transitividade Verbal', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Língua Portuguesa', lesson: '14', topic: 'Adjunto Adnominal Versus Predicativo do Objeto e Tipos de Predicado', type: 'video', completed: true },
            { date: '2025-08-09', subject: 'Língua Portuguesa', lesson: '15', topic: 'Tipos de Predicado', type: 'video', completed: true },
            { date: '2025-08-10', subject: 'Língua Portuguesa', lesson: '15', topic: 'Tipos de Predicado', type: 'video', completed: true },
            { date: '2025-08-10', subject: 'Língua Portuguesa', lesson: '16', topic: 'Aposto Versus Vocativo', type: 'video', completed: true },
            { date: '2025-08-10', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Psicologia Social', type: 'pdf' },
            { date: '2025-08-10', subject: 'Língua Portuguesa', lesson: '6', topic: 'A Sintaxe do Período Composto', type: 'pdf' },
            { date: '2025-08-11', subject: 'Língua Portuguesa', lesson: '6', topic: 'A Sintaxe do Período Composto', type: 'pdf' },
            { date: '2025-08-12', subject: 'Língua Portuguesa', lesson: '6', topic: 'A Sintaxe do Período Composto', type: 'pdf' },
            { date: '2025-08-12', subject: 'Conhecimentos Específicos', lesson: '44', topic: 'Decreto 7.508/11 - Questões - Parte 1', type: 'video', completed: true },
            { date: '2025-08-12', subject: 'Conhecimentos Específicos', lesson: '45', topic: 'Decreto 7.508/11 - Arts. 3 a 7', type: 'video', completed: true },
            { date: '2025-08-12', subject: 'Conhecimentos Específicos', lesson: '46', topic: 'Decreto 7.508/11 - Questões - Parte 2', type: 'video', completed: true },
            { date: '2025-08-12', subject: 'Conhecimentos Específicos', lesson: '47', topic: 'Decreto 7.508/11 - Arts. 8 a 14', type: 'video', completed: true },
            { date: '2025-08-12', subject: 'Língua Portuguesa', lesson: '17', topic: 'Funções Sintáticas dos Pronomes Pessoais Oblíquos', type: 'video' },
            { date: '2025-08-12', subject: 'Língua Portuguesa', lesson: '1', topic: 'Regência Verbal e Nominal', type: 'video' },
            { date: '2025-08-12', subject: 'Língua Portuguesa', lesson: '2', topic: 'Regência Verbal e Nominal II', type: 'video' },
            { date: '2025-08-12', subject: 'Língua Portuguesa', lesson: '3', topic: 'Regência Verbal e Nominal III', type: 'video' },
            { date: '2025-08-13', subject: 'Língua Portuguesa', lesson: '3', topic: 'Regência Verbal e Nominal III', type: 'video' },
            { date: '2025-08-13', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Avaliação Psicológica - Parte I', type: 'pdf' },
            { date: '2025-08-13', subject: 'Língua Portuguesa', lesson: '7', topic: 'Concordância, Regência, Colocação, Crase e Pontuação', type: 'pdf' },
            { date: '2025-08-14', subject: 'Língua Portuguesa', lesson: '7', topic: 'Concordância, Regência, Colocação, Crase e Pontuação', type: 'pdf' },
            { date: '2025-08-14', subject: 'Conhecimentos Específicos', lesson: '48', topic: 'Decreto 7.508/11 - Questões', type: 'video' },
            { date: '2025-08-14', subject: 'Conhecimentos Específicos', lesson: '49', topic: 'Decreto 7.508/11 - Arts. 15 ao 25', type: 'video' },
            { date: '2025-08-15', subject: 'Conhecimentos Específicos', lesson: '49', topic: 'Decreto 7.508/11 - Arts. 15 ao 25', type: 'video' },
            { date: '2025-08-15', subject: 'Conhecimentos Específicos', lesson: '50', topic: 'Decreto 7.508/11 - Arts. 26 a 30', type: 'video' },
            { date: '2025-08-15', subject: 'Conhecimentos Específicos', lesson: '51', topic: 'Decreto 7.508/11 - Arts. 31 a 44', type: 'video' },
            { date: '2025-08-15', subject: 'Língua Portuguesa', lesson: '1', topic: 'Emprego do Sinal Indicativo de Crase', type: 'video' },
            { date: '2025-08-15', subject: 'Língua Portuguesa', lesson: '2', topic: 'Emprego do Sinal Indicativo de Crase II', type: 'video' },
            { date: '2025-08-15', subject: 'Língua Portuguesa', lesson: '3', topic: 'Emprego do Sinal Indicativo de Crase III', type: 'video' },
            { date: '2025-08-15', subject: 'Língua Portuguesa', lesson: '1', topic: 'Coordenação Vs Subordinação', type: 'video' },
            { date: '2025-08-16', subject: 'Língua Portuguesa', lesson: '1', topic: 'Coordenação Vs Subordinação', type: 'video' },
            { date: '2025-08-16', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Avaliação Psicológica – Parte II', type: 'pdf' },
            { date: '2025-08-17', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Avaliação Psicológica – Parte II', type: 'pdf' },
            { date: '2025-08-17', subject: 'Conhecimentos Específicos', lesson: '52', topic: 'Decreto 7.508/11 - Questões', type: 'video' },
            { date: '2025-08-17', subject: 'Conhecimentos Específicos', lesson: '53', topic: 'Decreto 7.508/11 - Questões II', type: 'video' },
            { date: '2025-08-17', subject: 'Conhecimentos Específicos', lesson: '54', topic: 'Decreto 7.508/11 - Questões III', type: 'video' },
            { date: '2025-08-17', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 I', type: 'video' },
            { date: '2025-08-17', subject: 'Língua Portuguesa', lesson: '2', topic: 'Período Composto - Oração Subordinada Adjetiva', type: 'video' },
            { date: '2025-08-17', subject: 'Língua Portuguesa', lesson: '3', topic: 'Período Composto - Oração Subordinada Adjetiva e Função Sintática do Pronome Relativo', type: 'video' },
            { date: '2025-08-17', subject: 'Língua Portuguesa', lesson: '4', topic: 'Período Composto - Oração Subordinada Substantiva', type: 'video' },
            { date: '2025-08-18', subject: 'Língua Portuguesa', lesson: '4', topic: 'Período Composto - Oração Subordinada Substantiva', type: 'video' },
            { date: '2025-08-18', subject: 'Língua Portuguesa', lesson: '5', topic: 'Período Composto - Oração Subordinada Adverbial', type: 'video' },
            { date: '2025-08-18', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Psicologia da Saúde e Intervenções', type: 'pdf' },
            { date: '2025-08-18', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 II', type: 'video' },
            { date: '2025-08-18', subject: 'Raciocínio Lógico-Matemático', lesson: '1', topic: 'Operadores Lógicos Fundamentais', type: 'pdf' },
            { date: '2025-08-19', subject: 'Raciocínio Lógico-Matemático', lesson: '1', topic: 'Operadores Lógicos Fundamentais', type: 'pdf' },
            { date: '2025-08-19', subject: 'Administração Pública', lesson: '1', topic: 'Princípios Fundamentais', type: 'pdf' },
            { date: '2025-08-19', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 II', type: 'video' },
            { date: '2025-08-19', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 III', type: 'video' },
            { date: '2025-08-19', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 IV', type: 'video' },
            { date: '2025-08-19', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 V', type: 'video' },
            { date: '2025-08-19', subject: 'Língua Portuguesa', lesson: '6', topic: 'Período Composto - Oração Subordinada Adverbial II', type: 'video' },
            { date: '2025-08-19', subject: 'Língua Portuguesa', lesson: '7', topic: 'Período Composto - Orações Reduzidas', type: 'video' },
            { date: '2025-08-19', subject: 'Língua Portuguesa', lesson: '8', topic: 'Período Composto - Orações Coordenadas', type: 'video' },
            { date: '2025-08-20', subject: 'Administração Pública', lesson: '1', topic: 'Princípios Fundamentais', type: 'pdf' },
            { date: '2025-08-20', subject: 'Raciocínio Lógico-Matemático', lesson: '2', topic: 'Operador Condicional', type: 'pdf' },
            { date: '2025-08-20', subject: 'Língua Portuguesa', lesson: '8', topic: 'Período Composto - Orações Coordenadas', type: 'video' },
            { date: '2025-08-20', subject: 'Língua Portuguesa', lesson: '9', topic: 'Período Composto - Orações Coordenadas II', type: 'video' },
            { date: '2025-08-20', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Psicologia Organizacional - Parte I', type: 'pdf' },
            { date: '2025-08-21', subject: 'Raciocínio Lógico-Matemático', lesson: '2', topic: 'Operador Condicional', type: 'pdf' },
            { date: '2025-08-21', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Psicologia Organizacional - Parte I', type: 'pdf' },
            { date: '2025-08-21', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 VI', type: 'video' },
            { date: '2025-08-21', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 VII', type: 'video' },
            { date: '2025-08-21', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Estatuto do Idoso - Lei nº 10.741/2003-Resumo e Jurisprudência', type: 'video' },
            { date: '2025-08-21', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 - Exercícios', type: 'video' },
            { date: '2025-08-21', subject: 'Língua Portuguesa', lesson: '10', topic: 'Funções do SE', type: 'video' },
            { date: '2025-08-21', subject: 'Língua Portuguesa', lesson: '1', topic: 'Pontuação', type: 'video' },
            { date: '2025-08-22', subject: 'Raciocínio Lógico-Matemático', lesson: '2', topic: 'Operador Condicional', type: 'pdf' },
            { date: '2025-08-22', subject: 'Administração Pública', lesson: '2', topic: 'Direitos e Deveres Individuais e Coletivos', type: 'pdf' },
            { date: '2025-08-22', subject: 'Língua Portuguesa', lesson: '1', topic: 'Pontuação', type: 'video' },
            { date: '2025-08-22', subject: 'Língua Portuguesa', lesson: '2', topic: 'Pontuação II', type: 'video' },
            { date: '2025-08-22', subject: 'Língua Portuguesa', lesson: '3', topic: 'Pontuação III', type: 'video' },
            { date: '2025-08-22', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Psicologia Organizacional - Parte II', type: 'pdf' },
            { date: '2025-08-23', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Psicologia Organizacional - Parte II', type: 'pdf' },
            { date: '2025-08-23', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Estatuto do Idoso - Lei nº 10.741/2003 - Exercícios II', type: 'video' },
            { date: '2025-08-23', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Título I - Disposições Preliminares - Capítulo 1 - Disposições Gerais', type: 'video' },
            { date: '2025-08-23', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Lei nº 13.146/15- Livro I - Parte Geral - Titulo I - Disposições Preliminares - Capitulo I - Disposições Gerais', type: 'video' },
            { date: '2025-08-23', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Lei nº 13.146/15- Livro I - Parte Geral - Título I - Disposições Preliminares - Capítulo II - da Igualdade e da Não Discriminação', type: 'video' },
            { date: '2025-08-23', subject: 'Língua Portuguesa', lesson: '4', topic: 'Pontuação IV', type: 'video' },
            { date: '2025-08-23', subject: 'Língua Portuguesa', lesson: '1', topic: 'Concordância Verbal', type: 'video' },
            { date: '2025-08-24', subject: 'Língua Portuguesa', lesson: '1', topic: 'Concordância Verbal', type: 'video' },
            { date: '2025-08-24', subject: 'Língua Portuguesa', lesson: '2', topic: 'Concordância Verbal II', type: 'video' },
            { date: '2025-08-24', subject: 'Língua Portuguesa', lesson: '3', topic: 'Concordância Verbal III', type: 'video' },
            { date: '2025-08-24', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Gestão de Pessoas nas Organizações Públicas e Privadas', type: 'pdf' },
            { date: '2025-08-25', subject: 'Administração Pública', lesson: '2', topic: 'Direitos e Deveres Individuais e Coletivos', type: 'pdf' },
            { date: '2025-08-25', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Gestão de Pessoas nas Organizações Públicas e Privadas', type: 'pdf' },
            { date: '2025-08-25', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Lei nº 13.146/15- Livro I - Parte Geral - Titulo II - dos Direitos Fundamentais - Capítulo I do Direito à Vida e Capítulo II - do Direito à Habilitação e à Reabilitação', type: 'video' },
            { date: '2025-08-25', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Titulo II - dos Direitos Fundamentais - Capitulo III - do Direito à Saúde', type: 'video' },
            { date: '2025-08-25', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Lei nº 13.146/15- Livro I - Parte Geral - Título II - Dos Direitos Fundamentais - Capítulo IV - do Direito à Educação', type: 'video' },
            { date: '2025-08-25', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Título II - dos Direitos Fundamentais - Capitulo V e Vil - do Direito à Moradia e Direito ao Trabalho', type: 'video' },
            { date: '2025-08-25', subject: 'Língua Portuguesa', lesson: '4', topic: 'Concordância Nominal', type: 'video' },
            { date: '2025-08-26', subject: 'Administração Pública', lesson: '2', topic: 'Direitos e Deveres Individuais e Coletivos', type: 'pdf' },
            { date: '2025-08-26', subject: 'Raciocínio Lógico-Matemático', lesson: '3', topic: 'Lógica de Argumentação', type: 'pdf' },
            { date: '2025-08-26', subject: 'Língua Portuguesa', lesson: '4', topic: 'Concordância Nominal', type: 'video' },
            { date: '2025-08-26', subject: 'Língua Portuguesa', lesson: '1', topic: 'Significação Literal e Contextual', type: 'video' },
            { date: '2025-08-26', subject: 'Língua Portuguesa', lesson: '2', topic: 'Campos Semânticos e Campos Lexicais', type: 'video' },
            { date: '2025-08-26', subject: 'Língua Portuguesa', lesson: '1', topic: 'Figuras de Linguagem - Denotação, Conotação, Figurativização, Linguagem Lógica e Figurada', type: 'video' },
            { date: '2025-08-26', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Psicodinâmica do Trabalho', type: 'pdf' },
            { date: '2025-08-27', subject: 'Administração Pública', lesson: '3', topic: 'Direitos Sociais', type: 'pdf' },
            { date: '2025-08-27', subject: 'Raciocínio Lógico-Matemático', lesson: '3', topic: 'Lógica de Argumentação', type: 'pdf' },
            { date: '2025-08-27', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Psicodinâmica do Trabalho', type: 'pdf' },
            { date: '2025-08-27', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Titulo II - dos Direitos Fundamentais - Capítulo VII, VIII, IX e X - V - Direito à Assistência e Previdência Social do Direito', type: 'video' },
            { date: '2025-08-27', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Lei nº 13.146/15- Livro I - Parte Geral - Titulo III - da Acessibilidade - Capítulo I - Disposições Gerais e do Acesso à Informação e à Comunicação', type: 'video' },
            { date: '2025-08-27', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Titulo III - Capítulos II e III - Do Acesso à Informação e à Comunicação e Da Tecnologia Assistiva', type: 'video' },
            { date: '2025-08-27', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Lei nº 13.146/15 - Livro I - Parte Geral - Título III - Capítulos IV e Titulo IV - Do Direito à Participação na Vida Pública e Política e da Tecnologia Assisti', type: 'video' },
            { date: '2025-08-27', subject: 'Língua Portuguesa', lesson: '2', topic: 'Figuras de Linguagem - Denotação, Conotação, Figurativização, Linguagem Lógica e Figurada II', type: 'video' },
            { date: '2025-08-27', subject: 'Língua Portuguesa', lesson: '3', topic: 'Figuras de Linguagem - Denotação, Conotação, Figurativização, Linguagem Lógica e Figurada III', type: 'video' },
            { date: '2025-08-28', subject: 'Administração Pública', lesson: '3', topic: 'Direitos Sociais', type: 'pdf' },
            { date: '2025-08-28', subject: 'Língua Portuguesa', lesson: '3', topic: 'Figuras de Linguagem - Denotação, Conotação, Figurativização, Linguagem Lógica e Figurada III', type: 'video' },
            { date: '2025-08-28', subject: 'Língua Portuguesa', lesson: '1', topic: 'Compreensão e Interpretação', type: 'video' },
            { date: '2025-08-28', subject: 'Língua Portuguesa', lesson: '1', topic: 'Tipologia e Gêneros Textuais - Modos de Organização Discursiva', type: 'video' },
            { date: '2025-08-28', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Lei Federal n. 8.069/1990 - Estatuto da Criança e do Adolescente - Parte Geral', type: 'pdf' },
            { date: '2025-08-29', subject: 'Administração Pública', lesson: '3', topic: 'Direitos Sociais', type: 'pdf' },
            { date: '2025-08-29', subject: 'Raciocínio Lógico-Matemático', lesson: '4', topic: 'Razão e Proporção, Regra de Três e Porcentagem', type: 'pdf' },
            { date: '2025-08-29', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Lei Federal n. 8.069/1990 - Estatuto da Criança e do Adolescente - Parte Geral', type: 'pdf' },
            { date: '2025-08-29', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Lei nº 13.146/15 - Livro II - Parte Especial - Título 1 - Do Acesso à Justiça - Capítulo I e II - Disposições Gerais e Do Reconhecimento Igual Perante a Lei', type: 'video' },
            { date: '2025-08-29', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Lei nº 13.146/15 - Livro II - Parte Especial - Título II - Dos Crimes e das Infrações Administrativas', type: 'video' },
            { date: '2025-08-30', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Lei nº 13.146/15 - Livro II - Parte Especial - Título II - Dos Crimes e das Infrações Administrativas', type: 'video' },
            { date: '2025-08-30', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Lei nº 13.146/15 - Livro II - Parte Especial - Título III - Disposições Finais e Transitórias', type: 'video' },
            { date: '2025-08-30', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Lei nº 13.146/15 - Livro II - Parte Especial - Título III - Disposições Finais e Transitórias II', type: 'video' },
            { date: '2025-08-30', subject: 'Língua Portuguesa', lesson: '2', topic: 'Tipologia e Gêneros Textuais - Modos de Organização Discursiva II', type: 'video' },
            { date: '2025-08-30', subject: 'Língua Portuguesa', lesson: '3', topic: 'Tipos de Discurso - Direto, Indireto, Indireto Livre', type: 'video' },
            { date: '2025-08-30', subject: 'Língua Portuguesa', lesson: '1', topic: 'A Coerência Textual', type: 'video' },
            { date: '2025-08-31', subject: 'Língua Portuguesa', lesson: '1', topic: 'A Coerência Textual', type: 'video' },
            { date: '2025-08-31', subject: 'Língua Portuguesa', lesson: '2', topic: 'Mecanismos de Coesão Textual', type: 'video' },
            { date: '2025-08-31', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Lei Federal n. 8.069/1990 - Estatuto da Criança e do Adolescente - Parte Especial', type: 'pdf' },
            // --- SETEMBRO 2025 ---
            { date: '2025-09-01', subject: 'Raciocínio Lógico-Matemático', lesson: '4', topic: 'Razão e Proporção, Regra de Três e Porcentagem', type: 'pdf' },
            { date: '2025-09-01', subject: 'Administração Pública', lesson: '4', topic: 'Nacionalidade', type: 'pdf' },
            { date: '2025-09-01', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Lei Federal n. 8.069/1990 - Estatuto da Criança e do Adolescente - Parte Especial', type: 'pdf' },
            { date: '2025-09-01', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Lei nº 13.146/15 - Exercícios', type: 'video' },
            { date: '2025-09-02', subject: 'Administração Pública', lesson: '4', topic: 'Nacionalidade', type: 'pdf' },
            { date: '2025-09-02', subject: 'Raciocínio Lógico-Matemático', lesson: '5', topic: 'Funções e Gráficos do 1º Grau', type: 'pdf' },
            { date: '2025-09-02', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Lei nº 13.146/15 - Exercícios', type: 'video' },
            { date: '2025-09-02', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Lei nº 13.146/15 - Exercícios II', type: 'video' },
            { date: '2025-09-02', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Lei nº 13.146/15 - Exercícios III', type: 'video' },
            { date: '2025-09-02', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Teorias e Técnicas Psicoterápicas', type: 'video' },
            { date: '2025-09-02', subject: 'Língua Portuguesa', lesson: '3', topic: 'Mecanismos de Coesão Textual II', type: 'video' },
            { date: '2025-09-02', subject: 'Língua Portuguesa', lesson: '4', topic: 'Coesão Sequencial e Emprego de Conectivos', type: 'video' },
            { date: '2025-09-02', subject: 'Língua Portuguesa', lesson: '5', topic: 'Coesão Sequencial e Emprego de Conectivos II', type: 'video' },
            { date: '2025-09-03', subject: 'Raciocínio Lógico-Matemático', lesson: '5', topic: 'Funções e Gráficos do 1º Grau', type: 'pdf' },
            { date: '2025-09-03', subject: 'Língua Portuguesa', lesson: '5', topic: 'Coesão Sequencial e Emprego de Conectivos II', type: 'video' },
            { date: '2025-09-03', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Psicoterapia', type: 'video' },
            { date: '2025-09-03', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Psicoterapia II', type: 'video' },
            { date: '2025-09-03', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'TTP - Psicoterapia Breve - Origens, Linhas, Características Comuns', type: 'video' },
            { date: '2025-09-03', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'TTP - Psicoterapia Breve - PBSP, Conceitos Básicos, EEC, Efeito Carambola', type: 'video' },
            { date: '2025-09-03', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'TTP - Psicoterapia Breve - Caracterísiticas Técnicas, Diferenças', type: 'video' },
            { date: '2025-09-04', subject: 'Raciocínio Lógico-Matemático', lesson: '5', topic: 'Funções e Gráficos do 1º Grau', type: 'pdf' },
            { date: '2025-09-04', subject: 'Administração Pública', lesson: '5', topic: 'Direitos Políticos e Partidos Políticos', type: 'pdf' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'TTP - Psicoterapia Breve - Caracterisiticas Técnicas, Diferenças', type: 'video' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'TTP - Psicoterapia Breve - Tripé, Alta, Indicações e Contra - Indicações', type: 'video' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'TTP - Psicoterapia Breve - Terapia Cognitivo Comportamental - Princípios', type: 'video' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'TTP - Psicoterapia Breve - Reestruturação Cognitiva e Terapia de Exposição Prolongada', type: 'video' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'TTP - Psicoterapia Breve - Resolução de Questões', type: 'video' },
            { date: '2025-09-04', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'TTP- Psicoterapia Breve - Resolução de Questões II', type: 'video' },
            { date: '2025-09-05', subject: 'Administração Pública', lesson: '5', topic: 'Direitos Políticos e Partidos Políticos', type: 'pdf' },
            { date: '2025-09-05', subject: 'Raciocínio Lógico-Matemático', lesson: '6', topic: 'Funções e Gráficos do 2º Grau', type: 'pdf' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Avaliação Psicológica e Psicodiagnóstico - Entrevista Psicológica e Técnicas de Entrevista - Conceitos Básicos - Entrevista', type: 'video' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Avaliação Psicológica e Psicodiagnóstico - Entrevista Psicológica e Técnicas de Entrevista - Conceitos Básicos - Classificações e Resolução de Questões', type: 'video' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Avaliação Psicológica e Psicodiagnóstico - Entrevista Psicológica e Técnicas de Entrevista - Conceitos Básicos - Técnicas e Resolução de Questões', type: 'video' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Avaliação Psicológica e Psicodiagnóstico - Entrevista Psicológica e Técnicas de Entrevista - Conceitos Básicos - Técnicas e Resolução de Questões II', type: 'video' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Avaliação Psicológica e Psicodiagnóstico - Entrevista Psicológica e Técnicas de Entrevista - Resolução de Questões', type: 'video' },
            { date: '2025-09-05', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Psicanálise - Fundamentos', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Psicanálise - Fundamentos', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Psicanálise - Fundamentos II', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Psicanálise - Fundamentos III', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Mecanismos de Defesa do Ego', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Psicanálise: Escola Freudiana', type: 'video' },
            { date: '2025-09-06', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicanálise: Escola Kleiniana', type: 'video' },
            { date: '2025-09-07', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicanálise: Escola Kleiniana', type: 'video' },
            { date: '2025-09-07', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Psicanálise: Escola Winnicotiana', type: 'video' },
            { date: '2025-09-07', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Revisão e Exercícios - Teoria Cognitiva Comportamental', type: 'video' },
            { date: '2025-09-07', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Abordagem cognitivo - comportamental', type: 'video' },
            { date: '2025-09-07', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Abordagem cognitivo - comportamental II', type: 'video' },
            { date: '2025-09-08', subject: 'Raciocínio Lógico-Matemático', lesson: '6', topic: 'Funções e Gráficos do 2º Grau', type: 'pdf' },
            { date: '2025-09-08', subject: 'Administração Pública', lesson: '6', topic: 'Organização Político-Administrativa do Estado', type: 'pdf' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Abordagem cognitivo - comportamental II', type: 'video' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Abordagem Sistêmica - Conceitos Básicos', type: 'video' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Abordagem Sistêmica - Conceitos Fundamentais', type: 'video' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Abordagem Sistêmica - Aplicações', type: 'video' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Abordagem Sistémica - Resolução de Questões', type: 'video' },
            { date: '2025-09-08', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Abordagem psicodramática', type: 'video' },
            { date: '2025-09-09', subject: 'Administração Pública', lesson: '6', topic: 'Organização Político-Administrativa do Estado', type: 'pdf' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Abordagem psicodramática', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Humanismo: Introdução a Abordagem Centrada na Pessoa', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Humanismo: Introdução a Abordagem Centrada na Pessoa II', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Gestalt Terapia', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Gestalt Terapia II', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Gestalt Terapia III', type: 'video' },
            { date: '2025-09-09', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Gestalt Terapia IV', type: 'video' },
            { date: '2025-09-10', subject: 'Administração Pública', lesson: '6', topic: 'Organização Político-Administrativa do Estado', type: 'pdf' },
            { date: '2025-09-10', subject: 'Raciocínio Lógico-Matemático', lesson: '7', topic: 'Análise Combinatória', type: 'pdf' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Gestalt Terapia IV', type: 'video' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '22', topic: 'Gestalt Terapia V', type: 'video' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '23', topic: 'Gestalt Terapia VI', type: 'video' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Revisão e Exercícios - Teoria Humanista', type: 'video' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '25', topic: 'Revisão e Exercicios - Teorias e Técnicas Psicoterápicas - Questões', type: 'video' },
            { date: '2025-09-10', subject: 'Conhecimentos Específicos', lesson: '26', topic: 'Revisão e Exercícios - Teoria Comportamental', type: 'video' },
            { date: '2025-09-11', subject: 'Raciocínio Lógico-Matemático', lesson: '7', topic: 'Análise Combinatória', type: 'pdf' },
            { date: '2025-09-11', subject: 'Administração Pública', lesson: '7', topic: 'Repartição de Competências', type: 'pdf' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '26', topic: 'Revisão e Exercícios - Teoria Comportamental', type: 'video' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '27', topic: 'Abordagem corporal', type: 'video' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Psicopatologia: Noções de psicopatologia geral', type: 'video' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Psicopatologia: Noções de psicopatologia geral II', type: 'video' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Psicopatologia: Noções de psicopatologia geral III', type: 'video' },
            { date: '2025-09-11', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Psicopatologia: Noções de psicopatologia geral IV', type: 'video' },
            { date: '2025-09-12', subject: 'Administração Pública', lesson: '7', topic: 'Repartição de Competências', type: 'pdf' },
            { date: '2025-09-12', subject: 'Raciocínio Lógico-Matemático', lesson: '8', topic: 'Probabilidades', type: 'pdf' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Psicopatologia: Noções de psicopatologia geral IV', type: 'video' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Psicopatologia - Transtorno do Jogo Eletrônico ou Pela Internet', type: 'video' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicopatologia - Tratamento da Dependência de Internet e Jogos Eletrônicos', type: 'video' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Psicopatologia - Transtornos Alimentares', type: 'video' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Psicopatologia - Transtornos Depressivos', type: 'video' },
            { date: '2025-09-12', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Psicopatologia - Transtornos Depressivos II', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Psicopatologia - Transtornos Depressivos II', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Psicopatologia - Transtornos Depressivos - Resolução de Questões', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Psicopatologia - Transtornos da Personalidade', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Psicopatologia - Transtornos da Personalidade II', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Psicopatologia - Transtornos da Personalidade III', type: 'video' },
            { date: '2025-09-13', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Psicopatologia - Espectro da Esquizofrenia e outros Transtornos Psicóticos', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Psicopatologia - Espectro da Esquizofrenia e outros Transtornos Psicóticos', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Psicopatologia - Espectro da Esquizofrenia e outros Transtornos Psicóticos II', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Psicopatologia - Espectro da Esquizofrenia e outros Transtornos Psicóticos - Questões', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Psicopatologia - Transtorno Bipolar e Transtornos Relacionados', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Psicopatologia - Transtorno Bipolar e Transtornos Relacionados II', type: 'video' },
            { date: '2025-09-14', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Psicopatologia - Transtornos do Neurodesenvolvimento', type: 'video' },
            { date: '2025-09-15', subject: 'Raciocínio Lógico-Matemático', lesson: '8', topic: 'Probabilidades', type: 'pdf' },
            { date: '2025-09-15', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Psicopatologia - Transtornos do Neurodesenvolvimento', type: 'video' },
            { date: '2025-09-15', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Psicopatologia - Transtornos Psicológicos', type: 'video' },
            { date: '2025-09-15', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Psicopatologia - Transtornos do Neurodesenvolvimento e Psicológicos - Exercícios', type: 'video' },
            { date: '2025-09-15', subject: 'Conhecimentos Específicos', lesson: '22', topic: 'Transtorno de Estresse Pós - Traumático', type: 'video' },
            { date: '2025-09-15', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Resolução CFP 31/2022 1', type: 'video' },
            { date: '2025-09-16', subject: 'Raciocínio Lógico-Matemático', lesson: '8', topic: 'Probabilidades', type: 'pdf' },
            { date: '2025-09-16', subject: 'Administração Pública', lesson: '8', topic: 'Administração Pública', type: 'pdf' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Resolução CFP 31/2022 II', type: 'video' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Resolução CFP 31/2022 III', type: 'video' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Resolução CFP 31/2022 IV', type: 'video' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Avaliação Psicológica e Psicodiagnóstico - Definição de Avaliação Psicológica', type: 'video' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Avaliação Psicológica e Psicodiagnóstico - Tipos de Avaliação', type: 'video' },
            { date: '2025-09-16', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Avaliação Psicológica e Psicodiagnóstico - Documentos Que Fundamentam a Realização da Avaliação Psicológica & Cartilha', type: 'video' },
            { date: '2025-09-17', subject: 'Administração Pública', lesson: '8', topic: 'Administração Pública', type: 'pdf' },
            { date: '2025-09-17', subject: 'Raciocínio Lógico-Matemático', lesson: '9', topic: 'Progressões Aritméticas e Geométricas', type: 'pdf' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Avaliação Psicológica e Psicodiagnóstico - Documentos Que Fundamentam a Realização da Avaliação Psicológica & Cartilha', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Avaliação Psicológica e Psicodiagnóstico - Documentos Resultantes, Testagem, Satepsi', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Avaliação Psicológica e Psicodiagnóstico - Psicodiagnóstico', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Avaliação Psicológica e Psicodiagnóstico - Resolução de Questões', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Avaliação Psicológica e Psicodiagnóstico - Resolução de Questões II', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Avaliação Psicológica e Psicodiagnóstico - Resolução de Questões III', type: 'video' },
            { date: '2025-09-17', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Fundamentos e Etapas da Avaliação Psicológica', type: 'video' },
            { date: '2025-09-18', subject: 'Raciocínio Lógico-Matemático', lesson: '9', topic: 'Progressões Aritméticas e Geométricas', type: 'pdf' },
            { date: '2025-09-18', subject: 'Administração Pública', lesson: '1', topic: 'Organização Administrativa', type: 'pdf' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Fundamentos e Etapas da Avaliação Psicológica', type: 'video' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Conceitos Básicos', type: 'video' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Conceitos Básicos II', type: 'video' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Resolução de Questões', type: 'video' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Resolução de Questões II', type: 'video' },
            { date: '2025-09-18', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Resolução de Questões III', type: 'video' },
            { date: '2025-09-19', subject: 'Administração Pública', lesson: '1', topic: 'Organização Administrativa', type: 'pdf' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Avaliação Psicológica e Psicodiagnóstico - Instrumentos de Avaliação Psicológica - Resolução de Questões II', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Critérios de Seleção, Avaliação e Interpretação dos Resultados - Conceitos Básicos e Resolução de Questões', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Critérios de Seleção, Avaliação e Interpretação dos Resultados - Resolução de Questões', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Testagem Psicológica - Testes Psicométricos e Impressionista', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '22', topic: 'Testagem Psicológica - Testes de Inteligência', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '23', topic: 'Testagem Psicológica - Testes de Inteligência e de Personalidade', type: 'video' },
            { date: '2025-09-19', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Testagem Psicológica - Outros Testes, Inventários', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Testagem Psicológica - Outros Testes, Inventários', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '25', topic: 'Testagem Psicológica - Técnicas Projetivas, Técnicas Gráficas e Testes Motores', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '26', topic: 'Testagem Psicológica - Resolução de Questões', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Lei Federal n. 10.216/2001', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Portaria nº 336/2002', type: 'video' },
            { date: '2025-09-20', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Portaria nº 336/2002 II', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Portaria nº 336/2002 II', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Portaria nº 336/2002 III', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Portaria nº 336/2002 IV', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Apoio Matricial - Definição', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Apoio Matricial - Ações de Matriciamento', type: 'video' },
            { date: '2025-09-21', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Apoio Matricial - Resolução de questões', type: 'video' },
            { date: '2025-09-22', subject: 'Administração Pública', lesson: '1', topic: 'Organização Administrativa', type: 'pdf' },
            { date: '2025-09-22', subject: 'Raciocínio Lógico-Matemático', lesson: '10', topic: 'Números Inteiros', type: 'pdf' },
            { date: '2025-09-22', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Apoio Matricial - Resolução de questões', type: 'video' },
            { date: '2025-09-22', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Projeto Terapêutico Singular', type: 'video' },
            { date: '2025-09-22', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Projeto Terapêutico Singular - Resolução de Questões', type: 'video' },
            { date: '2025-09-22', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Prevenção Primária (Universal, Seletiva e Indicada), Secundária e Terciária em Saúde Mental - Prevenção Primária e Níveis de Risco', type: 'video' },
            { date: '2025-09-22', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Prevenção Primária (Universal, Seletiva e Indicada), Secundária e Terciária em Saúde Mental - Prevenção Secundária e Terciária e Modelo Integrativo', type: 'video' },
            { date: '2025-09-23', subject: 'Raciocínio Lógico-Matemático', lesson: '10', topic: 'Números Inteiros', type: 'pdf' },
            { date: '2025-09-23', subject: 'Administração Pública', lesson: '2', topic: 'Lei n. 8.429/1992 - Lei de Improbidade Administrativa', type: 'pdf' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Prevenção Primária (Universal, Seletiva e Indicada), Secundária e Terciária em Saúde Mental - Prevenção Secundária e Terciária e Modelo Integrativo', type: 'video' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Prevenção Primária (Universal, Seletiva e Indicada), Secundária e Terciária em Saúde Mental - Resolução de Questões', type: 'video' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Rede de Antenção Psicossocial - Pontos de Atenção', type: 'video' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Rede de Antenção Psicossocial - Pontos de Atenção II', type: 'video' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Rede de Antenção Psicossocial - Resolução de Questões', type: 'video' },
            { date: '2025-09-23', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Rede de Antenção Psicossocial - Resolução de Questões II', type: 'video' },
            { date: '2025-09-24', subject: 'Administração Pública', lesson: '2', topic: 'Lei n. 8.429/1992 - Lei de Improbidade Administrativa', type: 'pdf' },
            { date: '2025-09-24', subject: 'Raciocínio Lógico-Matemático', lesson: '11', topic: 'Números Racionais e Reais', type: 'pdf' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Rede de Antenção Psicossocial - Resolução de Questões II', type: 'video' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Atuação em Equipe Multiprofissional', type: 'video' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Atuação em Equipe Multiprofissional II', type: 'video' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Atuação em Equipe Multiprofissional III', type: 'video' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Atuação Em Equipe Multiprofissional - Resolução de Questões', type: 'video' },
            { date: '2025-09-24', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Atuação Em Equipe Multiprofissional - Resolução de Questões II', type: 'video' },
            { date: '2025-09-25', subject: 'Raciocínio Lógico-Matemático', lesson: '11', topic: 'Números Racionais e Reais', type: 'pdf' },
            { date: '2025-09-25', subject: 'Administração Pública', lesson: '3', topic: 'Lei n. 14.133/2021-Licitação - Comentada, Comparada e Esquematizada', type: 'pdf' },
            { date: '2025-09-25', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Atuação Em Equipe Multiprofissional - Resolução de Questões II', type: 'video' },
            { date: '2025-09-25', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Atuação Em Equipe Multiprofissional - Resolução de Questões III', type: 'video' },
            { date: '2025-09-25', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Atuação dos Psicólogos junto às Políticas Públicas e em Programas Sociais', type: 'video' },
            { date: '2025-09-25', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Atuação dos Psicólogos junto às Políticas Públicas e em Programas Sociais II', type: 'video' },
            { date: '2025-09-25', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Atuação dos Psicólogos junto às Políticas Públicas e em Programas Sociais III', type: 'video' },
            { date: '2025-09-26', subject: 'Administração Pública', lesson: '3', topic: 'Lei n. 14.133/2021-Licitação - Comentada, Comparada e Esquematizada', type: 'pdf' },
            { date: '2025-09-26', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Atuação dos Psicólogos junto às Políticas Públicas e em Programas Sociais III', type: 'video' },
            { date: '2025-09-26', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'A Família e suas Diferentes Configurações - História e Função Social da Família', type: 'video' },
            { date: '2025-09-26', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'A Familia e suas Diferentes Configurações - Configurações, Estruturas e Sistemas Familiares', type: 'video' },
            { date: '2025-09-26', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'A Família e suas Diferentes Configurações - Papéis, Regras, Fronteiras e Saúde Familiar', type: 'video' },
            { date: '2025-09-26', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'A Família e suas Diferentes Configurações - Resolução de Questões', type: 'video' },
            { date: '2025-09-27', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'A Família e suas Diferentes Configurações - Resolução de Questões', type: 'video' },
            { date: '2025-09-27', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Grupos em vulnerabilidade social. Atendimento e intervenções psicossociais', type: 'video' },
            { date: '2025-09-27', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Grupos em vulnerabilidade social. Atendimento e intervenções psicossociais II', type: 'video' },
            { date: '2025-09-27', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Grupos em vulnerabilidade social. Atendimento e intervenções psicossociais III', type: 'video' },
            { date: '2025-09-27', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Aspectos Psicossociais do Fenômeno da Violência - Contextualizando a Violência', type: 'video' },
            { date: '2025-09-28', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Aspectos Psicossociais do Fenômeno da Violência Contextualizando a Violência', type: 'video' },
            { date: '2025-09-28', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Aspectos Psicossociais do Fenômeno da Violência - Tipos de Violência', type: 'video' },
            { date: '2025-09-28', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Aspectos Psicossociais do Fenômeno da Violência - Resolução de Questões', type: 'video' },
            { date: '2025-09-28', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Assédio moral, assédio organizacional e assédio sexual', type: 'video' },
            { date: '2025-09-28', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Assédio moral, assédio organizacional e assédio sexual II', type: 'video' },
            { date: '2025-09-29', subject: 'Administração Pública', lesson: '3', topic: 'Lei n. 14.133/2021-Licitação - Comentada, Comparada e Esquematizada', type: 'pdf' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Assédio moral, assédio organizacional e assédio sexual II', type: 'video' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Assédio moral, assédio organizacional e assédio sexual III', type: 'video' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Assédio moral, assédio organizacional e assédio sexual IV', type: 'video' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Assédio moral, assédio organizacional e assédio sexual V', type: 'video' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Assédio moral, assédio organizacional e assédio sexual VI', type: 'video' },
            { date: '2025-09-29', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'O Papel da Agressividade no Desenvolvimento Humano - Teorias da Agressividade', type: 'video' },
            { date: '2025-09-30', subject: 'Administração Pública', lesson: '3', topic: 'Lei n. 14.133/2021 - Licitação - Comentada, Comparada e Esquematizada', type: 'pdf' },
            { date: '2025-09-30', subject: 'Raciocínio Lógico-Matemático', lesson: '12', topic: 'Geometria Plana: Áreas', type: 'pdf' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'O Papel da Agressividade no Desenvolvimento Humano - Teorias da Agressividade', type: 'video' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'O Papel da Agressividade no Desenvolvimento Humano - Winnicott e a Agressividade', type: 'video' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'O Papel da Agressividade no Desenvolvimento Humano - Resolução de Questões', type: 'video' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Educação Inclusiva', type: 'video' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Educação Inclusiva II', type: 'video' },
            { date: '2025-09-30', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Educação Inclusiva III', type: 'video' },
            // --- OUTUBRO 2025 ---
            { date: '2025-10-01', subject: 'Raciocínio Lógico-Matemático', lesson: '12', topic: 'Geometria Plana: Áreas', type: 'pdf' },
            { date: '2025-10-01', subject: 'Administração Pública', lesson: '4', topic: 'Lei n. 12.527/2011-Acesso à Informação', type: 'pdf' },
            { date: '2025-10-01', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Educação Inclusiva III', type: 'video' },
            { date: '2025-10-01', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Educação Inclusiva IV', type: 'video' },
            { date: '2025-10-01', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Psicologia do Desenvolvimento - René Spitz', type: 'video' },
            { date: '2025-10-01', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Psicologia do Desenvolvimento - Alexander Luria - Desenvolvimento Cognitivo', type: 'video' },
            { date: '2025-10-01', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Teóricos do desenvolvimento: Piaget', type: 'video' },
            { date: '2025-10-02', subject: 'Administração Pública', lesson: '4', topic: 'Lei n. 12.527/2011 - Acesso à Informação', type: 'pdf' },
            { date: '2025-10-02', subject: 'Raciocínio Lógico-Matemático', lesson: '13', topic: 'Geometria Plana: Segmentos', type: 'pdf' },
            { date: '2025-10-02', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Teóricos do desenvolvimento: Vigotski', type: 'video' },
            { date: '2025-10-02', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Teóricos do desenvolvimento - Jerome Bruner - Introdução', type: 'video' },
            { date: '2025-10-02', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Teóricos do desenvolvimento - Jerome Bruner - Introdução II', type: 'video' },
            { date: '2025-10-02', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Processo de comunicação na organização', type: 'video' },
            { date: '2025-10-02', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Processo de comunicação na organização II', type: 'video' },
            { date: '2025-10-03', subject: 'Raciocínio Lógico-Matemático', lesson: '13', topic: 'Geometria Plana: Segmentos', type: 'pdf' },
            { date: '2025-10-03', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Processo de comunicação na organização II', type: 'video' },
            { date: '2025-10-03', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Psicologia de Grupo e Equipes de Trabalho - Definindo Grupo e Equipe', type: 'video' },
            { date: '2025-10-03', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Psicologia de Grupo e Equipes de Trabalho - Estrutura dos Grupos', type: 'video' },
            { date: '2025-10-03', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Psicologia de Grupo e Equipes de Trabalho Estágios de Desenvolvimento do Grupo', type: 'video' },
            { date: '2025-10-03', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicologia de Grupo e Equipes de Trabalho - Equipes de Trabalho', type: 'video' },
            { date: '2025-10-04', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'Psicologia de Grupo e Equipes de Trabalho - Equipes de Trabalho', type: 'video' },
            { date: '2025-10-04', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'Psicologia de Grupo e Equipes de Trabalho - Componentes Básicos das Equipes Eficazes', type: 'video' },
            { date: '2025-10-04', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Psicologia de Grupo e Equipes de Trabalho - Componentes Básicos das Equipes Eficazes II', type: 'video' },
            { date: '2025-10-04', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Processos de Grupos - Fundamentos', type: 'video' },
            { date: '2025-10-04', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Estrutura de Grupo - Coesão e Conflito', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Estrutura de Grupo - Coesão e Conflito', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '11', topic: 'Processos de Grupo Conflito e Tomada de Decisão', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '12', topic: 'Processos de Grupo - Questões', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '13', topic: 'Liderança I', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '14', topic: 'Liderança II', type: 'video' },
            { date: '2025-10-05', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Liderança III', type: 'video' },
            { date: '2025-10-06', subject: 'Raciocínio Lógico-Matemático', lesson: '13', topic: 'Geometria Plana: Segmentos', type: 'pdf' },
            { date: '2025-10-06', subject: 'Administração Pública', lesson: '5', topic: 'Lei n. 13.709/2018-Lei Geral de Proteção de Dados - Parte I', type: 'pdf' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '15', topic: 'Liderança III', type: 'video' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '16', topic: 'Liderança IV', type: 'video' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '17', topic: 'Cultura e Clima Organizacional: paradigmas, conceitos, elementos e dinâmica. Evolução conceitual, componentes e estratégias de gestão', type: 'video' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '18', topic: 'Cultura e Clima Organizacional: paradigmas, conceitos, elementos e dinâmica. Evolução conceitual, componentes e estratégias de gestão II', type: 'video' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '19', topic: 'Cultura e Clima Organizacional: paradigmas, conceitos, elementos e dinâmica. Evolução conceitual, componentes e estratégias de gestão III', type: 'video' },
            { date: '2025-10-06', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Gerenciamento da pluralidade nas empresas', type: 'video' },
            { date: '2025-10-07', subject: 'Administração Pública', lesson: '5', topic: 'Lei n. 13.709/2018-Lei Geral de Proteção de Dados - Parte I', type: 'pdf' },
            { date: '2025-10-07', subject: 'Raciocínio Lógico-Matemático', lesson: '14', topic: 'Trigonometria', type: 'pdf' },
            { date: '2025-10-07', subject: 'Conhecimentos Específicos', lesson: '20', topic: 'Gerenciamento da pluralidade nas empresas', type: 'video' },
            { date: '2025-10-07', subject: 'Conhecimentos Específicos', lesson: '21', topic: 'Visão Geral da Psicopatologia', type: 'video' },
            { date: '2025-10-07', subject: 'Conhecimentos Específicos', lesson: '22', topic: 'Psicopatologia: Fundamentos', type: 'video' },
            { date: '2025-10-07', subject: 'Conhecimentos Específicos', lesson: '23', topic: 'Psicopatologia: Fundamentos II', type: 'video' },
            { date: '2025-10-07', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Psicopatologia: Fundamentos III', type: 'video' },
            { date: '2025-10-08', subject: 'Raciocínio Lógico-Matemático', lesson: '14', topic: 'Trigonometria', type: 'pdf' },
            { date: '2025-10-08', subject: 'Administração Pública', lesson: '6', topic: 'Lei n. 13.709/2018- Lei Geral de Proteção de Dados - Parte II', type: 'pdf' },
            { date: '2025-10-08', subject: 'Conhecimentos Específicos', lesson: '24', topic: 'Psicopatologia: Fundamentos III', type: 'video' },
            { date: '2025-10-08', subject: 'Conhecimentos Específicos', lesson: '25', topic: 'Saúde Mental no Contexto Laboral - Psicopatologia do Trabalho', type: 'video' },
            { date: '2025-10-08', subject: 'Conhecimentos Específicos', lesson: '26', topic: 'Psicodinâmica do Trabalho - Fundamentos', type: 'video' },
            { date: '2025-10-08', subject: 'Conhecimentos Específicos', lesson: '27', topic: 'Psicodinâmica do Trabalho - A Clínica do Trabalho', type: 'video' },
            { date: '2025-10-09', subject: 'Administração Pública', lesson: '6', topic: 'Lei n. 13.709/2018 Lei Geral de Proteção de Dados - Parte II', type: 'pdf' },
            { date: '2025-10-09', subject: 'Raciocínio Lógico-Matemático', lesson: '15', topic: 'Números Complexos e Polinômios', type: 'pdf' },
            { date: '2025-10-09', subject: 'Conhecimentos Específicos', lesson: '27', topic: 'Psicodinâmica do Trabalho - A Clínica do Trabalho', type: 'video' },
            { date: '2025-10-09', subject: 'Conhecimentos Específicos', lesson: '28', topic: 'Psicodinâmica do Trabalho - Adoecimentos Psiquicos Prevalentes no Contexto de Trabalho', type: 'video' },
            { date: '2025-10-09', subject: 'Conhecimentos Específicos', lesson: '29', topic: 'Psicossociologia do Trabalho', type: 'video' },
            { date: '2025-10-09', subject: 'Conhecimentos Específicos', lesson: '30', topic: 'Ergonomia da Atividade e Psicopatologia do Trabalho', type: 'video' },
            { date: '2025-10-09', subject: 'Conhecimentos Específicos', lesson: '31', topic: 'Ergonomia da Atividade e Psicopatologia do Trabalho II', type: 'video' },
            { date: '2025-10-10', subject: 'Raciocínio Lógico-Matemático', lesson: '15', topic: 'Números Complexos e Polinômios', type: 'pdf' },
            { date: '2025-10-10', subject: 'Administração Pública', lesson: '7', topic: 'Lei 13.709/2018 - Lei Geral de Proteção de Dados - Parte III', type: 'pdf' },
            { date: '2025-10-10', subject: 'Conhecimentos Específicos', lesson: '31', topic: 'Ergonomia da Atividade e Psicopatologia do Trabalho II', type: 'video' },
            { date: '2025-10-10', subject: 'Conhecimentos Específicos', lesson: '32', topic: 'Ergonomia da Atividade e Psicopatologia do Trabalho III', type: 'video' },
            { date: '2025-10-10', subject: 'Conhecimentos Específicos', lesson: '33', topic: 'Relação entre trabalho, processos de subjetivação e processos de saúde e adoecimento relacionado ao trabalho', type: 'video' },
            { date: '2025-10-10', subject: 'Conhecimentos Específicos', lesson: '34', topic: 'Saúde Mental no Contexto Laboral - Psicodinâmica do Trabalho', type: 'video' },
            { date: '2025-10-10', subject: 'Conhecimentos Específicos', lesson: '35', topic: 'Adoecimentos Psíquicos Prevalentes no Trabalho', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '35', topic: 'Adoecimentos Psíquicos Prevalentes no Trabalho', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '36', topic: 'Adoecimentos Psíquicos Prevalentes no Trabalho II', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '37', topic: 'Gestão por competências: Conceitos e principais abordagens metodológicas. Gestão por Competências no Serviço Público', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '38', topic: 'Gestão por competências: Conceitos e principais abordagens metodológicas. Gestão por Competências no Serviço Público II', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '39', topic: 'Gestão por competências: Conceitos e principais abordagens metodológicas. Gestão por Competências no Serviço Público III', type: 'video' },
            { date: '2025-10-11', subject: 'Conhecimentos Específicos', lesson: '40', topic: 'Gestão por competências: Conceitos e principais abordagens metodológicas. Gestão por Competências no Serviço Público IV', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '40', topic: 'Gestão por competências: Conceitos e principais abordagens metodológicas. Gestão por Competências no Serviço Público IV', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '41', topic: 'Avaliação de desempenho e performance', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '42', topic: 'Avaliação de desempenho e performance II', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '43', topic: 'Avaliação de desempenho e performance III', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '44', topic: 'Educação Corporativa TD&E e Planejamento', type: 'video' },
            { date: '2025-10-12', subject: 'Conhecimentos Específicos', lesson: '45', topic: 'Educação Corporativa TD&E e Planejamento', type: 'video' },
            { date: '2025-10-13', subject: 'Administração Pública', lesson: '7', topic: 'Lei 13.709/2018 - Lei Geral de Proteção de Dados - Parte III', type: 'pdf' },
            { date: '2025-10-13', subject: 'Raciocínio Lógico-Matemático', lesson: '16', topic: 'Geometria Espacial', type: 'pdf' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '45', topic: 'Educação Corporativa TD&E e Planejamento', type: 'video' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '46', topic: 'Educação Corporativa TD&E e Planejamento III', type: 'video' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '47', topic: 'Educação Corporativa - Conceitos Iniciais', type: 'video' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '48', topic: 'Educação Corporativa - Organizações de Aprendizagem e Trilha de Aprendizagem', type: 'video' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '49', topic: 'Educação Corporativa - Organizações de Aprendizagem e Trilha de Aprendizagem II', type: 'video' },
            { date: '2025-10-13', subject: 'Conhecimentos Específicos', lesson: '50', topic: 'Readaptação e Reabilitação', type: 'video' },
            { date: '2025-10-14', subject: 'Raciocínio Lógico-Matemático', lesson: '16', topic: 'Geometria Espacial', type: 'pdf' },
            { date: '2025-10-14', subject: 'Raciocínio Lógico-Matemático', lesson: '17', topic: 'Geometria Analitica', type: 'pdf' },
            { date: '2025-10-14', subject: 'Conhecimentos Específicos', lesson: '51', topic: 'Readaptação e Reabilitação II', type: 'video' },
            { date: '2025-10-14', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Atuação do Psicólogo no SUAS I', type: 'video' },
            { date: '2025-10-14', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Atuação do Psicólogo no SUAS II', type: 'video' },
            { date: '2025-10-14', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Atuação do Psicólogo no SUAS III', type: 'video' },
            { date: '2025-10-15', subject: 'Raciocínio Lógico-Matemático', lesson: '17', topic: 'Geometria Analítica', type: 'pdf' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Atuação do Psicólogo no SUAS III', type: 'video' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Atuação do Psicólogo no SUAS IV', type: 'video' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'Atuação do Psicólogo no SUAS V', type: 'video' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Os Direitos Fundamentais da Criança e do Adolescente - Direito à Vida e à Saúde e Direito à Liberdade, Ao Respeito e à Dignidade', type: 'video' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Os Direitos Fundamentais da Criança e do Adolescente - Direito à Convivência Familiar e Comunitária', type: 'video' },
            { date: '2025-10-15', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Os Direitos Fundamentais da Criança e do Adolescente - Direito à Convivência Familiar e Comunitária II', type: 'video' },
            { date: '2025-10-16', subject: 'Raciocínio Lógico-Matemático', lesson: '18', topic: 'Matrizes, Determinantes e Sistemas Lineares', type: 'pdf' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Os Direitos Fundamentais da Criança e do Adolescente - Direito à Convivência Familiar e Comunitária II', type: 'video' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '4', topic: 'Os Direitos Fundamentais da Criança e do Adolescente - Resolução de Questões', type: 'video' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '5', topic: 'As Medidas Específicas de Proteção à Criança e Ao Adolescente', type: 'video' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '6', topic: 'As Medidas Específicas de Proteção à Criança e Ao Adolescente II', type: 'video' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '7', topic: 'As Medidas Específicas de Proteção à Criança e Ao Adolescente - Resolução de Questões', type: 'video' },
            { date: '2025-10-16', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Adolescente Em Conflito Com a Lei e as Medidas Socioeducativas', type: 'video' },
            { date: '2025-10-17', subject: 'Conhecimentos Específicos', lesson: '8', topic: 'Adolescente Em Conflito Com a Lei e as Medidas Socioeducativas', type: 'video' },
            { date: '2025-10-17', subject: 'Conhecimentos Específicos', lesson: '9', topic: 'Adolescente Em Conflito Com a Lei e as Medidas Socioeducativas II', type: 'video' },
            { date: '2025-10-17', subject: 'Conhecimentos Específicos', lesson: '10', topic: 'Adolescente Em Conflito Com a Lei e as Medidas Socioeducativas III - Resolução de Questões', type: 'video' },
            { date: '2025-10-17', subject: 'Conhecimentos Específicos', lesson: '1', topic: 'Resolução CFP 10/2005 - Código de Ética do Psicólogo', type: 'video' },
            { date: '2025-10-17', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Resolução CFP 10/2005 II - Código de Ética do Psicólogo', type: 'video' },
            { date: '2025-10-18', subject: 'Conhecimentos Específicos', lesson: '2', topic: 'Resolução CFP 10/2005 II - Código de Ética do Psicólogo', type: 'video' },
            { date: '2025-10-18', subject: 'Conhecimentos Específicos', lesson: '3', topic: 'Resolução CFP 10/2005 III - Código de Ética do Psicólogo', type: 'video' },
        ];

        const legislacaoMunicipalTasks = [
            { subject: 'Administração Pública', lesson: 'L1', topic: 'Lei Orgânica do Município de Uberlândia - Art. 1º ao 15º', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L2', topic: 'Lei Orgânica do Município de Uberlândia - Art. 16º ao 30º', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L3', topic: 'Lei Orgânica - Competências do Município', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L4', topic: 'Lei Orgânica - Servidores Públicos', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L5', topic: 'Estatuto dos Servidores (LC nº 40/1992) - Disposições Preliminares', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L6', topic: 'Estatuto dos Servidores - Direitos e Vantagens', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L7', topic: 'Estatuto dos Servidores - Regime Disciplinar', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L8', topic: 'Estatuto dos Servidores - Responsabilidades', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L9', topic: 'Plano de Cargos e Carreiras (LC nº 671/2018) - Estrutura Geral', type: 'legis' },
            { subject: 'Administração Pública', lesson: 'L10', topic: 'Revisão Geral - Legislação Municipal', type: 'legis' },
        ];

        let currentDate = new Date('2025-08-18T03:00:00Z');
        const endDate = new Date('2025-10-20T03:00:00Z');
        let legislacaoIndex = 0;

        while (currentDate <= endDate && legislacaoIndex < legislacaoMunicipalTasks.length) {
            const dayOfWeek = currentDate.getDay();
            if (dayOfWeek >= 1 && dayOfWeek <= 4) {
                const task = legislacaoMunicipalTasks[legislacaoIndex];
                allTasks.push({ ...task, date: formatDateYMD(currentDate) });
                legislacaoIndex++;
            }
            currentDate.setDate(currentDate.getDate() + 1);
        }

        allTasks.forEach(task => {
            const id = generateUniqueId(task);
            const dateStr = formatDateYMD(new Date(task.date + 'T03:00:00Z'));
            if (!plan.tasks[dateStr]) plan.tasks[dateStr] = [];
            if (!plan.tasks[dateStr].some(t => t.id === id)) {
                plan.tasks[dateStr].push({ id, ...task, date: dateStr, completed: task.completed || false });
            }
        });
        return plan;
    }

    const saveState = () => {
        db.collection("progresso").doc("meuPlano").set(studyPlan)
            .catch((error) => console.error("Erro ao salvar progresso: ", error));
    };

    const loadState = async () => {
        const docRef = db.collection("progresso").doc("meuPlano");
        try {
            const doc = await docRef.get();
            if (doc.exists && doc.data().tasks) { 
                studyPlan = doc.data();
                if (!studyPlan.dailyGoals) studyPlan.dailyGoals = {};
                if (!studyPlan.deletedTasks) studyPlan.deletedTasks = {};
            } else {
                console.log("Nenhum plano encontrado no Firestore, inicializando um novo.");
                studyPlan = initializeStudyPlan();
                saveState(); 
            }
        } catch (error) {
            console.error("Erro ao carregar progresso: ", error);
            studyPlan = initializeStudyPlan();
        }
    };

    function createTaskCard(task, isOverdue = false) {
        const card = document.createElement('div');
        let cardClasses = 'task-card p-4 rounded-lg shadow-sm';
        if (task.type.startsWith('review')) cardClasses += ` ${task.type}`;
        if (task.type === 'legis') cardClasses += ' legis';
        if (isOverdue) cardClasses += ' overdue';
        card.className = cardClasses;
        
        const title = task.type.startsWith('review') ? `${task.reviewType}: ${task.subject} - Aula ${task.lesson}` : `${task.subject} - Aula ${task.lesson}`;

        const actionsMenu = !task.type.startsWith('review') ? `
            <div class="actions-menu">
                <button class="action-btn task-postpone-btn" data-id="${task.id}" data-date="${task.date}" title="Adiar em 1 dia"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><path d="m14 14-4 4m0-4 4 4"></path></svg></button>
                <button class="action-btn task-edit-btn" data-id="${task.id}" data-date="${task.date}" title="Editar Aula"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path></svg></button>
                <button class="action-btn task-delete-btn" data-id="${task.id}" data-date="${task.date}" data-type="${task.type}" title="Excluir Aula"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
            </div>` : '';

        card.innerHTML = `
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0 pt-1"><input type="checkbox" id="${task.id}" data-id="${task.id}" data-date="${task.date}" data-type="${task.type}" class="task-checkbox h-5 w-5 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]" ${task.completed ? 'checked' : ''}></div>
                <div class="flex-1">
                    <label for="${task.id}" class="cursor-pointer">
                        <p class="font-semibold text-gray-700">${title}</p>
                        <p class="text-gray-600 text-sm">${task.topic}</p>
                        ${isOverdue ? `<p class="text-xs text-red-600 font-semibold">Atrasada desde: ${formatDateDMY(task.date)}</p>` : ''}
                    </label>
                </div>
            </div>
            ${actionsMenu}`;
        return card;
    }

    // =================== LÓGICA DE REVISÕES ===================
    function scheduleReviews(completedTask) {
        const completionDate = new Date(completedTask.date + 'T03:00:00Z');
        const reviewDays = { 'review-r1': 1, 'review-r3': 7, 'review-r5': 30 };

        for (const [reviewType, daysToAdd] of Object.entries(reviewDays)) {
            const reviewDate = addDays(completionDate, daysToAdd);
            const reviewDateStr = formatDateYMD(reviewDate);
            if (!studyPlan.reviews) studyPlan.reviews = {};
            if (!studyPlan.reviews[reviewDateStr]) studyPlan.reviews[reviewDateStr] = [];
            const reviewId = `${completedTask.id}-${reviewType}`;
            if (studyPlan.reviews[reviewDateStr].some(r => r.id === reviewId)) continue;
            studyPlan.reviews[reviewDateStr].push({ id: reviewId, date: reviewDateStr, subject: completedTask.subject, lesson: completedTask.lesson, topic: completedTask.topic, type: reviewType, reviewType: reviewType.replace('review-', '').toUpperCase(), completed: false });
        }
    }
    
    function unscheduleReviews(deselectedTask) {
        const completionDate = new Date(deselectedTask.date + 'T03:00:00Z');
        const reviewDays = { 'review-r1': 1, 'review-r3': 7, 'review-r5': 30 };
        for (const [reviewType, daysToAdd] of Object.entries(reviewDays)) {
            const reviewDate = addDays(completionDate, daysToAdd);
            const reviewDateStr = formatDateYMD(reviewDate);
            const reviewId = `${deselectedTask.id}-${reviewType}`;
            if (studyPlan.reviews && studyPlan.reviews[reviewDateStr]) {
                studyPlan.reviews[reviewDateStr] = studyPlan.reviews[reviewDateStr].filter(r => r.id !== reviewId);
                if (studyPlan.reviews[reviewDateStr].length === 0) delete studyPlan.reviews[reviewDateStr];
            }
        }
    }
    
    // =================== RENDERIZAÇÃO DA UI ===================
    function renderCalendar(date) {
        const calendarContainer = document.getElementById('calendar-container');
        const month = date.getMonth();
        const year = date.getFullYear();
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startDayOfWeek = firstDay.getDay();
        const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
        const dayNames = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"];

        let html = `<div class="flex justify-between items-center mb-4"><button id="prev-month" class="control-button p-2 rounded-full">&#x276E;</button><h2 class="text-xl font-bold">${monthNames[month]} ${year}</h2><button id="next-month" class="control-button p-2 rounded-full">&#x276F;</button></div><div class="grid grid-cols-7 gap-1 text-center font-semibold text-gray-600 mb-2">`;
        dayNames.forEach(day => { html += `<div>${day}</div>`; });
        html += `</div><div class="calendar-grid gap-1">`;
        for (let i = 0; i < startDayOfWeek; i++) { html += `<div></div>`; }
        for (let day = 1; day <= daysInMonth; day++) {
            const currentDate = new Date(year, month, day);
            const dateStr = formatDateYMD(currentDate);
            let classes = 'calendar-day cursor-pointer p-2 rounded-lg flex justify-center items-center h-12';
            if (studyPlan.tasks[dateStr]?.length > 0 || studyPlan.reviews[dateStr]?.length > 0) classes += ' has-task';
            if (isSameDay(currentDate, viewDate)) classes += ' selected';
            html += `<div class="${classes}" data-date="${dateStr}">${day}</div>`;
        }
        html += `</div>`;
        calendarContainer.innerHTML = html;
    }

    const renderPlan = (date) => {
        document.getElementById('calendar-container').style.display = 'block';
        renderCalendar(date);
        const dateStr = formatDateYMD(date);
        planContent.innerHTML = '';
        const todayStr = formatDateYMD(new Date());
        const tasksForDay = studyPlan.tasks[dateStr] || [];
        const reviewsForDay = studyPlan.reviews[dateStr] || [];

        if (tasksForDay.length === 0 && reviewsForDay.length === 0) {
            planContent.innerHTML = `<div class="text-center p-4 bg-gray-50 rounded-lg"><p class="text-gray-500">Nenhuma tarefa agendada para hoje. Dia de descanso!</p></div>`;
            return;
        }

        const createSection = (title, tasks, colorClass) => {
            if (tasks.length > 0) {
                let sectionHTML = `<h3 class="text-lg font-bold text-gray-800 mt-4 border-b-2 ${colorClass} pb-2">${title}</h3>`;
                tasks.forEach(task => { sectionHTML += createTaskCard(task, !task.completed && task.date < todayStr).outerHTML; });
                return sectionHTML;
            }
            return '';
        };

        planContent.innerHTML += createSection('☕ Bloco 1: Conteúdo Principal (Vídeo)', tasksForDay.filter(t => t.type === 'video'), 'border-amber-500');
        planContent.innerHTML += createSection('📖 Bloco 2: Leitura e Lógica (PDF)', tasksForDay.filter(t => t.type === 'pdf'), 'border-sky-500');
        
        let bloco3Content = createSection('', tasksForDay.filter(t => t.type === 'legis'), '');
        const dailyGoal = studyPlan.dailyGoals[dateStr] || { exercisesCompleted: false };
        bloco3Content += `<div class="task-card p-4 rounded-lg shadow-sm border-l-4 border-gray-400"><div class="flex items-start space-x-4"><div class="flex-shrink-0 pt-1"><input type="checkbox" id="exercises-checkbox-${dateStr}" data-date="${dateStr}" class="daily-goal-checkbox h-5 w-5 rounded border-gray-300 text-[#D5A021] focus:ring-[#D5A021]" ${dailyGoal.exercisesCompleted ? 'checked' : ''}></div><div class="flex-1"><label for="exercises-checkbox-${dateStr}" class="cursor-pointer"><p class="font-semibold text-gray-700">🎯 Meta de Exercícios do Dia</p><p class="text-gray-600 text-sm">Focar em 2 matérias conforme o plano de rotação semanal.</p></label></div></div></div>`;
        planContent.innerHTML += `<h3 class="text-lg font-bold text-gray-800 mt-6 border-b-2 border-emerald-500 pb-2">🎯 Bloco 3: Estudo Ativo e Fixação</h3>` + bloco3Content;

        if (reviewsForDay.length > 0) {
            planContent.innerHTML += createSection('🔁 Revisões Agendadas', reviewsForDay, 'border-red-400');
        }
    };
    
    // =================== LÓGICA DE PROGRESSO E GRÁFICOS ===================
    const updateProgress = () => {
        const allStudyTasks = Object.values(studyPlan.tasks || {}).flat();
        const completedStudyTasks = allStudyTasks.filter(task => task.completed).length;
        const totalStudyTasks = allStudyTasks.length;
        const percentage = totalStudyTasks > 0 ? Math.round((completedStudyTasks / totalStudyTasks) * 100) : 0;
        document.getElementById('progressText').textContent = `${percentage}%`;
        
        if (progressChart) {
            const allTasksAndReviews = allStudyTasks.concat(Object.values(studyPlan.reviews || {}).flat());
            const totalCompleted = allTasksAndReviews.filter(t => t.completed).length;
            const totalItems = allTasksAndReviews.length;
            progressChart.data.datasets[0].data = [totalCompleted, totalItems - totalCompleted];
            progressChart.update();
        }
        renderSubjectProgress();
        renderFreeSectionsStat();
    };

    const renderSubjectProgress = () => {
        const container = document.getElementById('subject-progress-bars');
        if (!container) return;
        const allStudyTasks = Object.values(studyPlan.tasks || {}).flat();
        if (allStudyTasks.length === 0) { container.innerHTML = ''; return; }
        const subjects = [...new Set(allStudyTasks.map(task => task.subject))];
        container.innerHTML = subjects.sort().map(subject => {
            const tasksForSubject = allStudyTasks.filter(task => task.subject === subject);
            const completedTasks = tasksForSubject.filter(task => task.completed).length;
            const totalTasks = tasksForSubject.length;
            const percentage = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            return `<div><div class="flex justify-between mb-1"><span class="text-sm font-semibold text-gray-700">${subject}</span><span class="text-sm font-semibold text-gray-700">${completedTasks}/${totalTasks} (${percentage}%)</span></div><div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-[#D5A021] h-2.5 rounded-full" style="width: ${percentage}%"></div></div></div>`;
        }).join('');
    };

    function renderFreeSectionsStat() {
        const container = document.getElementById('free-sections-container');
        if (!container) return;
        const allTaskDates = Object.keys(studyPlan.tasks || {});
        if (allTaskDates.length === 0) { container.innerHTML = ''; return; }

        const lastScheduledDateStr = allTaskDates.reduce((max, current) => current > max ? current : max);
        const lastScheduledDate = new Date(lastScheduledDateStr + 'T03:00:00Z');
        const examEve = new Date('2025-10-25T03:00:00Z');

        let content = '';
        if (lastScheduledDate >= examEve) {
            content = `<p class="text-2xl font-bold text-gray-700">0 dias</p><p class="text-sm text-gray-600">Seu cronograma está preenchido até a véspera da prova.</p>`;
        } else {
            let freeDays = 0;
            let currentDate = new Date(lastScheduledDate);
            currentDate.setDate(currentDate.getDate() + 1);
            while(currentDate <= examEve) {
                const dayOfWeek = currentDate.getDay();
                if (dayOfWeek >= 1 && dayOfWeek <= 5) { // Conta dias úteis (Seg-Sex)
                    freeDays++;
                }
                currentDate.setDate(currentDate.getDate() + 1);
            }
            const freeHours = freeDays * 3; // 3 blocos de estudo por dia
            const totalDays = Math.floor((examEve - lastScheduledDate) / (1000 * 60 * 60 * 24));
            content = `<p class="text-2xl font-bold text-gray-700">${freeHours} horas</p><p class="text-sm text-gray-600">(${totalDays} dias corridos) para remanejar aulas.</p>`;
        }
        
        container.innerHTML = `<div class="p-4 rounded-lg bg-gray-100 border border-gray-200 text-center"><h3 class="font-bold text-lg mb-2">"Gordura" no Cronograma</h3>${content}</div>`;
    }

    const setupChart = () => {
        const ctx = document.getElementById('progressChart').getContext('2d');
        progressChart = new Chart(ctx, {
            type: 'doughnut',
            data: { labels: ['Concluído', 'Pendente'], datasets: [{ data: [0, 1], backgroundColor: ['#D5A021', '#EAEAEA'], borderColor: ['#FFFFFF'], borderWidth: 4, hoverOffset: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, cutout: '75%', plugins: { legend: { display: false }, tooltip: { enabled: true } } }
        });
    };

    // =================== LÓGICA DOS MODAIS ===================
    function renderAllTasksTable() {
        const tableBody = document.getElementById('all-tasks-table-body');
        const resultsContainer = document.getElementById('results-count-container');
        const totalTasksCount = Object.values(studyPlan.tasks || {}).flat().length;
        let allTasks = Object.values(studyPlan.tasks || {}).flat();
        
        const subjectFilter = document.getElementById('filter-subject').value;
        if (subjectFilter) allTasks = allTasks.filter(task => task.subject === subjectFilter);
        
        const notCompletedFilter = document.getElementById('filter-not-completed').checked;
        if (notCompletedFilter) allTasks = allTasks.filter(task => !task.completed);
        
        const overdueFilter = document.getElementById('filter-overdue').checked;
        if (overdueFilter) {
            const todayStr = formatDateYMD(new Date());
            allTasks = allTasks.filter(task => !task.completed && task.date < todayStr);
        }

        const searchText = document.getElementById('all-tasks-search').value.toLowerCase();
        if (searchText) allTasks = allTasks.filter(task => task.subject.toLowerCase().includes(searchText) || task.topic.toLowerCase().includes(searchText));
        
        resultsContainer.textContent = `Mostrando ${allTasks.length} de ${totalTasksCount} aulas.`;

        const sortBy = document.getElementById('sort-by').value;
        allTasks.sort((a, b) => {
            switch (sortBy) {
                case 'date-desc': return new Date(b.date) - new Date(a.date);
                case 'subject-asc': return a.subject.localeCompare(b.subject);
                case 'subject-desc': return b.subject.localeCompare(a.subject);
                default: return new Date(a.date) - new Date(b.date);
            }
        });
        tableBody.innerHTML = allTasks.map(task => `<tr><td class="px-6 py-4"><input type="checkbox" class="task-select-checkbox h-4 w-4" data-id="${task.id}" data-date="${task.date}"></td><td class="px-6 py-4">${formatDateDMY(task.date)}</td><td class="px-6 py-4">${task.subject}</td><td class="px-6 py-4">${task.lesson}</td><td class="px-6 py-4">${task.topic}</td><td class="px-6 py-4 flex items-center gap-2"><button class="action-btn task-edit-btn-table" data-id="${task.id}" data-date="${task.date}" title="Editar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path></svg></button><button class="action-btn task-delete-btn-table" data-id="${task.id}" data-date="${task.date}" title="Excluir"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></td></tr>`).join('');
    }

    function renderTrashTable() {
        const tableBody = document.getElementById('trash-table-body');
        const deletedTasks = Object.values(studyPlan.deletedTasks || {});
        if (deletedTasks.length === 0) { tableBody.innerHTML = '<tr><td colspan="5" class="text-center py-8 text-gray-500">A lixeira está vazia.</td></tr>'; return; }
        tableBody.innerHTML = deletedTasks.sort((a, b) => new Date(b.deletedAt) - new Date(a.deletedAt)).map(task => `<tr><td class="px-6 py-4"><input type="checkbox" class="trash-select-checkbox h-4 w-4" data-id="${task.id}"></td><td class="px-6 py-4">${formatDateDMY(task.date)}</td><td class="px-6 py-4">${task.subject}</td><td class="px-6 py-4">${task.topic}</td><td class="px-6 py-4 space-x-2"><button class="restore-btn text-green-600" data-id="${task.id}">Restaurar</button><button class="perm-delete-btn text-red-600" data-id="${task.id}">Excluir</button></td></tr>`).join('');
    }

    function renderAllTasksStatistics() {
        const statsContainer = document.getElementById('all-tasks-stats');
        const allTasks = Object.values(studyPlan.tasks || {}).flat();
        const totalTasks = allTasks.length;
        const subjectCounts = allTasks.reduce((acc, task) => { acc[task.subject] = (acc[task.subject] || 0) + 1; return acc; }, {});
        let statsHtml = `<div class="p-2 bg-gray-100 rounded-lg"><p class="font-bold text-lg">${totalTasks}</p><p class="text-sm text-gray-600">Total de Aulas</p></div>`;
        Object.entries(subjectCounts).sort().forEach(([subject, count]) => { statsHtml += `<div class="p-2 bg-gray-100 rounded-lg"><p class="font-bold text-lg">${count}</p><p class="text-sm text-gray-600">${subject}</p></div>`; });
        statsContainer.innerHTML = statsHtml;
    }

    function renderOverdueTasks() {
        document.getElementById('calendar-container').style.display = 'none';
        planContent.innerHTML = '';
        const todayStr = formatDateYMD(new Date());
        const allTasksAndReviews = Object.values(studyPlan.tasks || {}).flat().concat(Object.values(studyPlan.reviews || {}).flat());
        const overdueTasks = allTasksAndReviews.filter(task => !task.completed && task.date < todayStr);
        
        const backButton = document.createElement('button');
        backButton.innerHTML = '&#x2B05;&#xFE0F; Voltar ao Calendário';
        backButton.className = 'control-button text-sm font-semibold py-2 px-4 rounded-lg shadow-sm mb-4';
        backButton.onclick = () => {
            document.getElementById('calendar-container').style.display = 'block';
            renderPlan(viewDate);
        };
        planContent.appendChild(backButton);
        
        if (overdueTasks.length === 0) { planContent.innerHTML += `<div class="text-center p-4 bg-green-50 rounded-lg border border-green-200"><p class="text-green-700 font-semibold">Parabéns! Nenhuma tarefa atrasada.</p></div>`; return; }

        const totalTasks = Object.values(studyPlan.tasks || {}).flat().length;
        const overduePercentage = totalTasks > 0 ? ((overdueTasks.length / totalTasks) * 100).toFixed(1) : 0;
        const overdueHours = (overdueTasks.length * 45 / 60).toFixed(1);
        planContent.innerHTML += `<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="bg-red-50 p-4 rounded-lg text-center"><p class="text-2xl font-bold text-red-700">${overdueTasks.length}</p><p class="text-sm font-semibold text-red-600">Total de Aulas Atrasadas</p></div><div class="bg-yellow-50 p-4 rounded-lg text-center"><p class="text-2xl font-bold text-yellow-700">${overduePercentage}%</p><p class="text-sm font-semibold text-yellow-600">do Total de Aulas</p></div><div class="bg-blue-50 p-4 rounded-lg text-center md:col-span-2"><p class="text-2xl font-bold text-blue-700">${overdueHours} horas</p><p class="text-sm font-semibold text-blue-600">de Estudo Acumulado (aprox.)</p></div></div>`;
        
        const groupedByDate = overdueTasks.reduce((acc, task) => { (acc[task.date] = acc[task.date] || []).push(task); return acc; }, {});
        Object.keys(groupedByDate).sort().forEach(dateStr => {
            const dateTitle = document.createElement('h3');
            dateTitle.className = "text-lg font-bold text-gray-800 mt-6 border-b-2 border-red-400 pb-2";
            dateTitle.textContent = `Atrasadas de: ${formatDateDMY(dateStr)}`;
            planContent.appendChild(dateTitle);
            groupedByDate[dateStr].forEach(task => planContent.appendChild(createTaskCard(task, true)));
        });
    }
    
    const startCountdown = () => {
        const countdownEl = document.getElementById('countdown');
        const examDate = new Date('2025-10-26T11:00:00Z').getTime();
        const update = () => {
            const distance = examDate - new Date().getTime();
            if (distance < 0) { countdownEl.innerHTML = "PROVA REALIZADA!"; clearInterval(interval); return; }
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            countdownEl.innerHTML = `${days}d ${hours}h`;
        };
        const interval = setInterval(update, 1000 * 60 * 60);
        update();
    };

    function openEditModalFromList(taskId, taskDate) {
        const task = studyPlan.tasks[taskDate]?.find(t => t.id === taskId);
        if (task) {
            populateSubjectSelect(document.getElementById('task-subject'));
            document.getElementById('modal-title').textContent = 'Editar Aula';
            document.getElementById('task-id').value = task.id;
            document.getElementById('original-task-date').value = task.date;
            document.getElementById('task-date').value = task.date;
            document.getElementById('task-subject').value = task.subject;
            document.getElementById('task-lesson').value = task.lesson;
            document.getElementById('task-topic').value = task.topic;
            document.getElementById('task-type').value = task.type;
            openModal(addTaskModal);
        }
    }

    function populateSubjectSelect(selectElement) {
        const allTasks = Object.values(studyPlan.tasks || {}).flat();
        const subjects = [...new Set(allTasks.map(task => task.subject))].sort();
        selectElement.innerHTML = subjects.map(s => `<option value="${s}">${s}</option>`).join('');
    }

    function shiftAllTasks(days) {
        const newTasks = {};
        const allTasks = Object.values(studyPlan.tasks).flat();
        
        allTasks.forEach(task => {
            if (!task.completed) {
                const currentDate = new Date(task.date + 'T03:00:00Z');
                const newDate = addDays(currentDate, days);
                const newDateStr = formatDateYMD(newDate);
                task.date = newDateStr;
            }
            const dateStr = task.date;
            if (!newTasks[dateStr]) newTasks[dateStr] = [];
            newTasks[dateStr].push(task);
        });
        studyPlan.tasks = newTasks;
        saveState();
        renderAllTasksTable();
        updateProgress();
        renderPlan(viewDate);
    }

    function shiftSelectedTasks(days) {
        const selected = Array.from(document.querySelectorAll('#all-tasks-table-body .task-select-checkbox:checked')).map(cb => ({ id: cb.dataset.id, date: cb.dataset.date }));
        if (selected.length === 0) return;

        selected.forEach(item => {
            const taskIndex = studyPlan.tasks[item.date]?.findIndex(t => t.id === item.id);
            if (taskIndex > -1) {
                const [task] = studyPlan.tasks[item.date].splice(taskIndex, 1);
                if (studyPlan.tasks[item.date].length === 0) delete studyPlan.tasks[item.date];

                const newDate = addDays(new Date(task.date + 'T03:00:00Z'), days);
                const newDateStr = formatDateYMD(newDate);
                task.date = newDateStr;
                if (!studyPlan.tasks[newDateStr]) studyPlan.tasks[newDateStr] = [];
                studyPlan.tasks[newDateStr].push(task);
            }
        });
        saveState();
        renderAllTasksTable();
        updateProgress();
        renderPlan(viewDate);
        updateSelectedActionsVisibility();
    }

    function updateSelectedActionsVisibility() {
        const selectedCount = document.querySelectorAll('#all-tasks-table-body .task-select-checkbox:checked').length;
        const container = document.getElementById('selected-actions-container');
        const countSpan = document.getElementById('selection-count');

        if (selectedCount > 1) {
            countSpan.textContent = `${selectedCount} aulas selecionadas:`;
            container.classList.remove('hidden');
        } else {
            container.classList.add('hidden');
        }
    }

    function updateTrashActionsVisibility() {
        const anySelected = document.querySelectorAll('#trash-table-body .trash-select-checkbox:checked').length > 0;
        document.getElementById('trash-actions-container').classList.toggle('hidden', !anySelected);
    }

    // =================== EVENT LISTENERS (PONTO DE IGNIÇÃO) ===================
    document.addEventListener('DOMContentLoaded', async () => {
        
        if (isAuthenticated) {
            await loadState(); 
            setupChart();
            renderPlan(viewDate);
            updateProgress();
            startCountdown();
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('pt-BR');
        }

        passwordForm.addEventListener('submit', async () => {
            if (isAuthenticated) {
                await loadState();
                setupChart();
                renderPlan(viewDate);
                updateProgress();
                startCountdown();
                document.getElementById('currentDate').textContent = new Date().toLocaleDateString('pt-BR');
            }
        });

        // --- CORREÇÃO: LÓGICA DO MENU DE AJUSTES ---
        const settingsButton = document.getElementById('settings-button');
        const settingsMenu = document.getElementById('settings-menu');

        settingsButton.addEventListener('click', (event) => {
            event.stopPropagation(); 
            settingsMenu.classList.toggle('hidden');
        });

        window.addEventListener('click', (event) => {
            if (!settingsMenu.classList.contains('hidden') && !settingsMenu.contains(event.target) && event.target !== settingsButton) {
                settingsMenu.classList.add('hidden');
            }
        });
        
        document.getElementById('home-btn').addEventListener('click', () => {
             document.getElementById('calendar-container').style.display = 'block';
             viewDate = new Date(); // Reset viewDate to today
             renderPlan(viewDate);
        });

        document.getElementById('add-task-btn').addEventListener('click', () => {
            document.getElementById('add-task-form').reset();
            populateSubjectSelect(document.getElementById('task-subject'));
            document.getElementById('modal-title').textContent = 'Incluir Nova Aula';
            document.getElementById('task-id').value = '';
            document.getElementById('original-task-date').value = '';
            openModal(addTaskModal);
        });

        document.getElementById('manage-tasks-btn').addEventListener('click', () => {
            const allTasks = Object.values(studyPlan.tasks || {}).flat();
            const subjects = [...new Set(allTasks.map(task => task.subject))].sort();
            const filterSelect = document.getElementById('filter-subject');
            filterSelect.innerHTML = '<option value="">Todas</option>' + subjects.map(s => `<option value="${s}">${s}</option>`).join('');
            renderAllTasksTable();
            renderAllTasksStatistics();
            updateSelectedActionsVisibility();
            openModal(allTasksModal);
        });
        
        document.getElementById('add-task-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const date = document.getElementById('task-date').value;
            const subject = document.getElementById('task-subject').value;
            const lesson = document.getElementById('task-lesson').value;
            const topic = document.getElementById('task-topic').value;
            const type = document.getElementById('task-type').value;
            const id = document.getElementById('task-id').value;
            const originalDate = document.getElementById('original-task-date').value;

            if (id && originalDate && studyPlan.tasks[originalDate]) {
                studyPlan.tasks[originalDate] = studyPlan.tasks[originalDate].filter(t => t.id !== id);
                if (studyPlan.tasks[originalDate].length === 0) delete studyPlan.tasks[originalDate];
            }
            const taskData = { id: id || generateUniqueId({ subject, lesson, type }), date, subject, lesson, topic, type, completed: false };
            if (!studyPlan.tasks[date]) studyPlan.tasks[date] = [];
            studyPlan.tasks[date].push(taskData);
            saveState();
            renderPlan(viewDate);
            updateProgress();
            closeModal(addTaskModal);
        });

        planContent.addEventListener('click', (e) => {
            const editBtn = e.target.closest('.task-edit-btn');
            const deleteBtn = e.target.closest('.task-delete-btn');
            const postponeBtn = e.target.closest('.task-postpone-btn');
            if (editBtn) openEditModalFromList(editBtn.dataset.id, editBtn.dataset.date);
            if (deleteBtn) {
                const { id, date } = deleteBtn.dataset;
                showConfirmation('Mover esta aula para a lixeira?', () => {
                    if (studyPlan.tasks[date]) {
                        const taskIndex = studyPlan.tasks[date].findIndex(t => t.id === id);
                        if (taskIndex > -1) {
                            const [taskToDelete] = studyPlan.tasks[date].splice(taskIndex, 1);
                            if (studyPlan.tasks[date].length === 0) delete studyPlan.tasks[date];
                            if (!studyPlan.deletedTasks) studyPlan.deletedTasks = {};
                            taskToDelete.deletedAt = new Date().toISOString();
                            studyPlan.deletedTasks[taskToDelete.id] = taskToDelete;
                            saveState();
                            renderPlan(viewDate);
                            updateProgress();
                        }
                    }
                });
            }
            if (postponeBtn) {
                const { id, date } = postponeBtn.dataset;
                const taskIndex = studyPlan.tasks[date]?.findIndex(t => t.id === id);
                if (taskIndex > -1) {
                    const task = studyPlan.tasks[date][taskIndex];
                    const nextDay = addDays(new Date(date + 'T03:00:00Z'), 1);
                    const nextDayStr = formatDateYMD(nextDay);
                    task.date = nextDayStr;
                    if (!studyPlan.tasks[nextDayStr]) studyPlan.tasks[nextDayStr] = [];
                    studyPlan.tasks[nextDayStr].push(task);
                    studyPlan.tasks[date].splice(taskIndex, 1);
                    if (studyPlan.tasks[date].length === 0) delete studyPlan.tasks[date];
                    saveState();
                    renderPlan(viewDate);
                }
            }
        });

        planContent.addEventListener('change', (e) => {
            if (e.target.matches('.task-checkbox')) {
                const { id, date, type } = e.target.dataset;
                let taskList = type.startsWith('review') ? studyPlan.reviews[date] : studyPlan.tasks[date];
                const task = taskList?.find(t => t.id === id);
                if (task) {
                    task.completed = e.target.checked;
                    if (!type.startsWith('review')) {
                        if (task.completed) scheduleReviews(task); else unscheduleReviews(task);
                    }
                    updateProgress();
                    saveState();
                    renderPlan(viewDate);
                }
            }
            if (e.target.matches('.daily-goal-checkbox')) {
                const { date } = e.target.dataset;
                if (!studyPlan.dailyGoals[date]) studyPlan.dailyGoals[date] = {};
                studyPlan.dailyGoals[date].exercisesCompleted = e.target.checked;
                saveState();
            }
        });

        document.getElementById('calendar-container').addEventListener('click', (e) => {
            const dayElement = e.target.closest('.calendar-day');
            if (dayElement) { viewDate = new Date(dayElement.dataset.date + 'T03:00:00Z'); renderPlan(viewDate); }
            if (e.target.id === 'prev-month') { viewDate.setMonth(viewDate.getMonth() - 1); renderPlan(viewDate); }
            if (e.target.id === 'next-month') { viewDate.setMonth(viewDate.getMonth() + 1); renderPlan(viewDate); }
        });

        document.querySelectorAll('.close-modal').forEach(btn => btn.addEventListener('click', (e) => closeModal(e.target.closest('.modal'))));
        
        document.getElementById('export-backup-btn').addEventListener('click', (e) => {
            e.preventDefault();
            const dataStr = JSON.stringify(studyPlan, null, 2);
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr));
            linkElement.setAttribute('download', 'backup_plano_estudos.json');
            linkElement.click();
            settingsMenu.classList.add('hidden');
        });
        document.getElementById('import-backup-btn').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('import-backup-file').click()
            settingsMenu.classList.add('hidden');
        });
        document.getElementById('import-backup-file').addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const importedData = JSON.parse(e.target.result);
                    if (importedData.tasks) { studyPlan = importedData; saveState(); renderPlan(viewDate); updateProgress(); } 
                    else { showConfirmation('Arquivo de backup inválido.', ()=>{}); }
                } catch (err) { showConfirmation('Erro ao ler o arquivo.', ()=>{}); }
            };
            reader.readAsText(file);
            event.target.value = '';
        });
        document.getElementById('reset-btn').addEventListener('click', (e) => {
            e.preventDefault();
            settingsMenu.classList.add('hidden');
            showConfirmation('Tem certeza que deseja apagar todo o progresso?', () => {
                studyPlan = initializeStudyPlan();
                saveState();
                renderPlan(viewDate);
                updateProgress();
            });
        });

        document.getElementById('view-overdue-tasks-btn').addEventListener('click', renderOverdueTasks);
        
        ['all-tasks-search', 'filter-subject', 'sort-by', 'filter-not-completed', 'filter-overdue'].forEach(id => {
            document.getElementById(id).addEventListener('input', renderAllTasksTable);
        });
        
        document.getElementById('all-tasks-table-body').addEventListener('click', (e) => {
            const editBtn = e.target.closest('.task-edit-btn-table');
            const deleteBtn = e.target.closest('.task-delete-btn-table');
            if (editBtn) openEditModalFromList(editBtn.dataset.id, editBtn.dataset.date);
            if (deleteBtn) {
                const { id, date } = deleteBtn.dataset;
                showConfirmation('Mover esta aula para a lixeira?', () => {
                     if (studyPlan.tasks[date]) {
                        const taskIndex = studyPlan.tasks[date].findIndex(t => t.id === id);
                        if (taskIndex > -1) {
                            const [taskToDelete] = studyPlan.tasks[date].splice(taskIndex, 1);
                            if (studyPlan.tasks[date].length === 0) delete studyPlan.tasks[date];
                            if (!studyPlan.deletedTasks) studyPlan.deletedTasks = {};
                            taskToDelete.deletedAt = new Date().toISOString();
                            studyPlan.deletedTasks[taskToDelete.id] = taskToDelete;
                            saveState();
                            renderAllTasksTable();
                            updateProgress();
                        }
                    }
                });
            }
            if (e.target.classList.contains('task-select-checkbox')) {
                updateSelectedActionsVisibility();
            }
        });

        document.getElementById('select-all-tasks-checkbox').addEventListener('change', (e) => {
            document.querySelectorAll('#all-tasks-table-body .task-select-checkbox').forEach(checkbox => checkbox.checked = e.target.checked);
            updateSelectedActionsVisibility();
        });

        document.getElementById('delete-selected-btn').addEventListener('click', () => {
            const selected = Array.from(document.querySelectorAll('#all-tasks-table-body .task-select-checkbox:checked')).map(cb => ({ id: cb.dataset.id, date: cb.dataset.date }));
            if (selected.length === 0) return;
            showConfirmation(`Mover as ${selected.length} aulas para a lixeira?`, () => {
                selected.forEach(item => {
                    const taskIndex = studyPlan.tasks[item.date]?.findIndex(t => t.id === item.id);
                    if (taskIndex > -1) {
                        const [taskToDelete] = studyPlan.tasks[item.date].splice(taskIndex, 1);
                        if (studyPlan.tasks[item.date].length === 0) delete studyPlan.tasks[item.date];
                        if (!studyPlan.deletedTasks) studyPlan.deletedTasks = {};
                        taskToDelete.deletedAt = new Date().toISOString();
                        studyPlan.deletedTasks[taskToDelete.id] = taskToDelete;
                    }
                });
                saveState();
                renderAllTasksTable();
                renderAllTasksStatistics();
                updateProgress();
                updateSelectedActionsVisibility();
            });
        });

        document.getElementById('shift-selected-forward-btn').addEventListener('click', () => shiftSelectedTasks(1));
        document.getElementById('shift-selected-backward-btn').addEventListener('click', () => shiftSelectedTasks(-1));
        document.getElementById('shift-all-forward-btn').addEventListener('click', () => showConfirmation('Adiar todas as aulas não concluídas em 1 dia?', () => shiftAllTasks(1)));
        document.getElementById('shift-all-backward-btn').addEventListener('click', () => showConfirmation('Adiantar todas as aulas não concluídas em 1 dia?', () => shiftAllTasks(-1)));

        // Lógica das Abas e Lixeira
        document.getElementById('tab-active').addEventListener('click', () => {
            document.getElementById('tab-active').classList.add('active');
            document.getElementById('tab-trash').classList.remove('active');
            document.getElementById('tab-content-active').classList.remove('hidden');
            document.getElementById('tab-content-trash').classList.add('hidden');
        });
        document.getElementById('tab-trash').addEventListener('click', () => {
            document.getElementById('tab-trash').classList.add('active');
            document.getElementById('tab-active').classList.remove('active');
            document.getElementById('tab-content-trash').classList.remove('hidden');
            document.getElementById('tab-content-active').classList.add('hidden');
            renderTrashTable();
        });
        document.getElementById('trash-table-body').addEventListener('click', (e) => {
            const { id } = e.target.dataset;
            if (e.target.classList.contains('restore-btn')) {
                const taskToRestore = studyPlan.deletedTasks[id];
                if (taskToRestore) {
                    const date = taskToRestore.date;
                    if (!studyPlan.tasks[date]) studyPlan.tasks[date] = [];
                    studyPlan.tasks[date].push(taskToRestore);
                    delete studyPlan.deletedTasks[id];
                    saveState();
                    renderTrashTable();
                    updateProgress();
                }
            }
            if (e.target.classList.contains('perm-delete-btn')) {
                showConfirmation('Excluir permanentemente?', () => {
                    if (studyPlan.deletedTasks[id]) {
                        delete studyPlan.deletedTasks[id];
                        saveState();
                        renderTrashTable();
                    }
                });
            }
            if(e.target.classList.contains('trash-select-checkbox')) {
                updateTrashActionsVisibility();
            }
        });
        document.getElementById('select-all-trash-checkbox').addEventListener('change', (e) => {
            document.querySelectorAll('#trash-table-body .trash-select-checkbox').forEach(checkbox => checkbox.checked = e.target.checked);
            updateTrashActionsVisibility();
        });
        document.getElementById('restore-all-btn').addEventListener('click', () => {
            const selectedIds = Array.from(document.querySelectorAll('#trash-table-body .trash-select-checkbox:checked')).map(cb => cb.dataset.id);
            if(selectedIds.length === 0) return;
            showConfirmation(`Restaurar ${selectedIds.length} aulas da lixeira?`, () => {
                selectedIds.forEach(id => {
                    const taskToRestore = studyPlan.deletedTasks[id];
                    if (taskToRestore) {
                        const date = taskToRestore.date;
                        if (!studyPlan.tasks[date]) studyPlan.tasks[date] = [];
                        studyPlan.tasks[date].push(taskToRestore);
                        delete studyPlan.deletedTasks[id];
                    }
                });
                saveState();
                renderTrashTable();
                updateProgress();
                updateTrashActionsVisibility();
            });
        });
        document.getElementById('delete-all-perm-btn').addEventListener('click', () => {
            const selectedIds = Array.from(document.querySelectorAll('#trash-table-body .trash-select-checkbox:checked')).map(cb => cb.dataset.id);
            if(selectedIds.length === 0) return;
            showConfirmation(`Excluir permanentemente ${selectedIds.length} aulas?`, () => {
                selectedIds.forEach(id => {
                    delete studyPlan.deletedTasks[id];
                });
                saveState();
                renderTrashTable();
                updateTrashActionsVisibility();
            });
        });
    });
</script>

</body>
</html>
